{
  "objectType" : "Graph",
  "metadata" : {
    "timeline_timerFps" : "60",
    "camera_mat44" : "{\n  \"row0\" : {\n    \"x\" : 0.9998345971107483,\n    \"y\" : -0.006262567359954119,\n    \"z\" : -0.01525984145700932,\n    \"t\" : -0.4207310974597931\n    },\n  \"row1\" : {\n    \"x\" : -1.223023559759895e-06,\n    \"y\" : 0.9249892830848694,\n    \"z\" : -0.3797499537467957,\n    \"t\" : -6.189291477203369\n    },\n  \"row2\" : {\n    \"x\" : 0.01649506017565727,\n    \"y\" : 0.3796690106391907,\n    \"z\" : 0.9249346852302551,\n    \"t\" : 12.51513576507568\n    },\n  \"row3\" : {\n    \"x\" : 0,\n    \"y\" : 0,\n    \"z\" : 0,\n    \"t\" : 1\n    }\n  }",
    "timeline_start" : "1",
    "timeline_loopMode" : "1",
    "uiGraphZoom" : "{\n  \"value\" : 0.4845657348632813\n  }",
    "timeline_simMode" : "0",
    "camera_focalDistance" : "15.8879337310791",
    "timeline_current" : "1",
    "timeline_end" : "1000",
    "uiGraphPan" : "{\n  \"x\" : 1085.473698690767,\n  \"y\" : 533.6539317113929\n  }"
    },
  "title" : "",
  "ports" : [
    {
      "objectType" : "ExecPort",
      "name" : "exec",
      "nodePortType" : "IO",
      "execPortType" : "IO",
      "typeSpec" : "Execute"
      },
    {
      "objectType" : "ExecPort",
      "name" : "timeline",
      "nodePortType" : "Out",
      "execPortType" : "In",
      "typeSpec" : "Scalar"
      },
    {
      "objectType" : "ExecPort",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(1, 50)"
        },
      "name" : "numX",
      "nodePortType" : "Out",
      "execPortType" : "In",
      "typeSpec" : "UInt32"
      },
    {
      "objectType" : "ExecPort",
      "metadata" : {
        "uiPersistValue" : "true",
        "uiRange" : "(1, 50)"
        },
      "name" : "numY",
      "nodePortType" : "Out",
      "execPortType" : "In",
      "typeSpec" : "UInt32"
      },
    {
      "objectType" : "ExecPort",
      "name" : "init_xfos",
      "nodePortType" : "In",
      "execPortType" : "Out",
      "typeSpec" : "Execute"
      },
    {
      "objectType" : "ExecPort",
      "name" : "drawThis",
      "nodePortType" : "In",
      "execPortType" : "Out",
      "typeSpec" : "DrawingHandle"
      },
    {
      "objectType" : "ExecPort",
      "name" : "debugHandle",
      "nodePortType" : "In",
      "execPortType" : "Out",
      "typeSpec" : "InlineDebugShape"
      }
    ],
  "extDeps" : {},
  "nodes" : [
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-821.521606445,\"y\":-915.978637695}",
        "uiCollapsedState" : "1"
        },
      "name" : "XfoGrid_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "sizeX",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "sizeY",
          "nodePortType" : "In",
          "defaultValues" : {
            "Scalar" : 10
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "sizeZ",
          "nodePortType" : "In",
          "defaultValues" : {
            "Scalar" : 1
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "numX",
          "nodePortType" : "In",
          "defaultValues" : {
            "UInt32" : 20
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "numY",
          "nodePortType" : "In",
          "defaultValues" : {
            "UInt32" : 19
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "numZ",
          "nodePortType" : "In",
          "defaultValues" : {
            "UInt32" : 1
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "adjustScale",
          "nodePortType" : "In",
          "defaultValues" : {
            "Scalar" : 0
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "scale",
          "nodePortType" : "In",
          "defaultValues" : {
            "Vec3" : {
              "x" : 1,
              "y" : 1,
              "z" : 1
              }
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "alignOrientation",
          "nodePortType" : "In",
          "defaultValues" : {
            "Scalar" : 1
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "lookAt",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "upVector",
          "nodePortType" : "In",
          "defaultValues" : {
            "Vec3" : {
              "x" : 0,
              "y" : 0,
              "z" : 1
              }
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "xfo",
          "nodePortType" : "Out"
          }
        ],
      "executable" : "Fabric.Compounds.Instanciate.XfoGrid",
      "presetGUID" : "DA77CD19A72FF084A7C343AC8F2C7D23"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\n  \"x\" : -570.5816955566406,\n  \"y\" : -973.6035461425781\n  }",
        "uiCollapsedState" : "1"
        },
      "name" : "Le_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "lhs",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "rhs",
          "nodePortType" : "In",
          "defaultValues" : {
            "Scalar" : 2
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "result",
          "nodePortType" : "Out"
          }
        ],
      "executable" : "Fabric.Core.Logic.Le",
      "presetGUID" : "29580C848A777A42608B45D8DF02D37C"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\n  \"x\" : -414.7836303710938,\n  \"y\" : -951.8171691894531\n  }"
        },
      "name" : "If_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "cond",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "if_true",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "if_false",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "result",
          "nodePortType" : "Out"
          }
        ],
      "executable" : "Fabric.Core.Control.If",
      "presetGUID" : "3182A478A21643455D549E483D35F831"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiComment" : "the inital Xfo grid size",
        "uiGraphPos" : "{\n  \"x\" : -981.1786193847656,\n  \"y\" : -782.3388977050781\n  }",
        "uiCollapsedState" : "2",
        "uiCommentExpanded" : "true"
        },
      "name" : "Scalar_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "value",
          "nodePortType" : "In",
          "defaultValues" : {
            "Scalar" : 12.80000019073486
            }
          }
        ],
      "executable" : "Fabric.Core.Constants.Scalar",
      "presetGUID" : "E0E96C6E234F70063BC98887B83327DC"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-819.544433594,\"y\":-950.848999023}",
        "uiCollapsedState" : "2"
        },
      "name" : "Scalar_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "value",
          "nodePortType" : "In"
          }
        ],
      "executable" : "Fabric.Core.Constants.Scalar",
      "presetGUID" : "E0E96C6E234F70063BC98887B83327DC"
      },
    {
      "objectType" : "User",
      "metadata" : {
        "uiTitle" : "advect the positions using the \"Array.ModifyInPlace\" preset and draw the result into the viewport",
        "uiGraphPos" : "{\"x\":-603.958895087,\"y\":-681.629548788}",
        "uiNodeColor" : "{\n  \"r\" : 73,\n  \"g\" : 143,\n  \"b\" : 85\n  }",
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiGraphSize" : "{\"w\":727.39440918,\"h\":264.920166016}"
        },
      "name" : "backDrop_4",
      "ports" : []
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-1106.52249694,\"y\":-513.713549972}"
        },
      "name" : "Basic_2D_Fluid_Solver",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "N",
          "nodePortType" : "In",
          "defaultValues" : {
            "UInt32" : 64
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "frame",
          "nodePortType" : "In",
          "defaultValues" : {
            "Scalar" : 0
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "emitterType",
          "nodePortType" : "In",
          "defaultValues" : {
            "UInt32" : 2
            }
          },
        {
          "objectType" : "InstPort",
          "name" : "imageVelocityAndDensity",
          "nodePortType" : "Out"
          }
        ],
      "definition" : {
        "objectType" : "Graph",
        "metadata" : {
          "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
          "uiNodeColor" : "{\n  \"r\" : 143,\n  \"g\" : 143,\n  \"b\" : 143\n  }",
          "uiGraphZoom" : "{\n  \"value\" : 0.5794917941093445\n  }",
          "uiGraphPan" : "{\n  \"x\" : 601.1534286324331,\n  \"y\" : 12.94283031258883\n  }"
          },
        "title" : "Basic_2D_Fluid_Solver",
        "ports" : [
          {
            "objectType" : "ExecPort",
            "name" : "exec",
            "nodePortType" : "IO",
            "defaultValues" : {
              "Execute" : {}
              },
            "execPortType" : "IO",
            "typeSpec" : "Execute"
            },
          {
            "objectType" : "ExecPort",
            "name" : "N",
            "nodePortType" : "Out",
            "defaultValues" : {
              "UInt32" : 64
              },
            "execPortType" : "In"
            },
          {
            "objectType" : "ExecPort",
            "name" : "frame",
            "nodePortType" : "Out",
            "defaultValues" : {
              "Scalar" : 0
              },
            "execPortType" : "In",
            "typeSpec" : "Scalar"
            },
          {
            "objectType" : "ExecPort",
            "metadata" : {
              "uiCombo" : "(\"Reset\", \"Small Moving Emitter at Bottom\", \"Center Emitter\", \"Left Emitter Bar\", \"Right Emitter Bar\", \"Left and right Emitter Bar\", \"Do nothing\")"
              },
            "name" : "emitterType",
            "nodePortType" : "Out",
            "defaultValues" : {
              "UInt32" : 2
              },
            "execPortType" : "In",
            "typeSpec" : "UInt32"
            },
          {
            "objectType" : "ExecPort",
            "name" : "imageVelocityAndDensity",
            "nodePortType" : "In",
            "execPortType" : "Out",
            "typeSpec" : "Image2DColor"
            }
          ],
        "extDeps" : {
          "Images" : "*"
          },
        "origPresetGUID" : "D17B3974559281363AEE9BEFF6457C0D",
        "nodes" : [
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiComment" : "fluid solver, see Jos Stam's paper GDC03\n\"Real - Time Fluid Dynamics for Games\"",
              "uiGraphPos" : "{\"x\":110.492721438,\"y\":273.157324314}",
              "uiCommentExpanded" : "true"
              },
            "name" : "FluidSolver",
            "ports" : [
              {
                "objectType" : "InstPort",
                "name" : "exec",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "N",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "u",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "v",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "d",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "u0",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "v0",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "d0",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "dt",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 0.07500000298023224
                  }
                },
              {
                "objectType" : "InstPort",
                "name" : "visc",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 0
                  }
                },
              {
                "objectType" : "InstPort",
                "name" : "diff",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Float32" : 0
                  }
                },
              {
                "objectType" : "InstPort",
                "name" : "frame",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "emitterType",
                "nodePortType" : "In",
                "defaultValues" : {
                  "UInt32" : 5
                  }
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "title" : "FluidSolver",
              "ports" : [
                {
                  "objectType" : "ExecPort",
                  "name" : "exec",
                  "nodePortType" : "IO",
                  "execPortType" : "IO",
                  "typeSpec" : "Execute"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "N",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "u",
                  "nodePortType" : "IO",
                  "execPortType" : "IO",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "v",
                  "nodePortType" : "IO",
                  "execPortType" : "IO",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "d",
                  "nodePortType" : "IO",
                  "execPortType" : "IO",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "u0",
                  "nodePortType" : "IO",
                  "execPortType" : "IO",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "v0",
                  "nodePortType" : "IO",
                  "execPortType" : "IO",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "d0",
                  "nodePortType" : "IO",
                  "execPortType" : "IO",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "dt",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "visc",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "diff",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "frame",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "Float32"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "emitterType",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "UInt32"
                  }
                ],
              "extDeps" : {
                "Geometry" : "*"
                },
              "code" : "inline function UInt32 IX(UInt32 i, UInt32 j, UInt32 N)
{
  return i + j * (N + 2);
}

operator add_source(UInt32 N, io Float32 x[], io Float32 s[], Float32 dt)
{
  for (UInt32 i=0;i<(N+2)*(N+2);i++)
    x[i] += dt * s[i];
}

operator set_bnd(UInt32 N, UInt32 b, io Float32 x[])
{
  for (UInt32 i=1;i<=N;i++)
  {
    x[IX(0  ,i,N)] = b==1 ? -x[IX(1,i,N)] : x[IX(1,i,N)];
    x[IX(N+1,i,N)] = b==1 ? -x[IX(N,i,N)] : x[IX(N,i,N)];
    x[IX(i,0  ,N)] = b==2 ? -x[IX(i,1,N)] : x[IX(i,1,N)];
    x[IX(i,N+1,N)] = b==2 ? -x[IX(i,N,N)] : x[IX(i,N,N)];
  }
  x[IX(0  ,0  ,N)] = 0.5f*(x[IX(1,0  ,N)]+x[IX(0  ,1,N)]);
  x[IX(0  ,N+1,N)] = 0.5f*(x[IX(1,N+1,N)]+x[IX(0  ,N,N)]);
  x[IX(N+1,0  ,N)] = 0.5f*(x[IX(N,0  ,N)]+x[IX(N+1,1,N)]);
  x[IX(N+1,N+1,N)] = 0.5f*(x[IX(N,N+1,N)]+x[IX(N+1,N,N)]);
}

operator lin_solve(UInt32 N, UInt32 b, io Float32 x[], Float32 x0[], Float32 a, Float32 c)
{
  for (UInt32 k=1;k<20;k++)
  {
    for (UInt32 i=1;i<=N;i++)
      for (UInt32 j=1;j<=N;j++)
        x[IX(i,j,N)] = (x0[IX(i,j,N)] + a * (x[IX(i-1,j,N)] + x[IX(i+1,j,N)] + x[IX(i,j-1,N)] + x[IX(i,j+1,N)])) / c;
    set_bnd(N, b, x);
  }
}

operator diffuse(UInt32 N, UInt32 b, io Float32 x[], Float32 x0[], Float32 diff, Float32 dt)
{
  Float32 a = dt * diff * N * N;
  lin_solve(N, b, x, x0, a, 1 + 4 * a);
}

operator advect (UInt32 N, UInt32 b, io Float32 d[], Float32 d0[], Float32 u[], Float32 v[], Float32 dt)
{
  Float32 dt0 = dt * N;
  for (UInt32 i=1;i<=N;i++)
    for (UInt32 j=1;j<=N;j++)
    {
      Float32 x = i - dt0 * u[IX(i,j,N)];
      Float32 y = j - dt0 * v[IX(i,j,N)];
      if (x < 0.5)  x = 0.5;  else if (x > N + 0.5)  x = N + 0.5;  UInt32 i0 = UInt32(x);  UInt32 i1 = i0 + 1;
      if (y < 0.5)  y = 0.5;  else if (y > N + 0.5)  y = N + 0.5;  UInt32 j0 = UInt32(y);  UInt32 j1 = j0 + 1;
      Float32 s1 = x - i0;
      Float32 s0 = 1 - s1;
      Float32 t1 = y - j0;
      Float32 t0 = 1 - t1;
      d[IX(i,j,N)] =   s0 * (t0 * d0[IX(i0,j0,N)] + t1 * d0[IX(i0,j1,N)])
                     + s1 * (t0 * d0[IX(i1,j0,N)] + t1 * d0[IX(i1,j1,N)]);
    }
  set_bnd(N, b, d);
}

operator project(UInt32 N, io Float32 u[], io Float32 v[], io Float32 p[], io Float32 div[])
{
  for (UInt32 i=1;i<=N;i++)
    for (UInt32 j=1;j<=N;j++)
    {
      div[IX(i,j,N)] = -0.5 * (u[IX(i+1,j,N)] - u[IX(i-1,j,N)] + v[IX(i,j+1,N)] - v[IX(i,j-1,N)]) / N;
      p  [IX(i,j,N)] = 0;
    }
  set_bnd(N, 0, div );
  set_bnd(N, 0, p);

	lin_solve(N, 0, p, div, 1, 4);

  for (UInt32 i=1;i<=N;i++)
    for (UInt32 j=1;j<=N;j++)
    {
      u[IX(i,j,N)] -= 0.5 * N * (p[IX(i+1,j,N)] - p[IX(i-1,j,N)]);
      v[IX(i,j,N)] -= 0.5 * N * (p[IX(i,j+1,N)] - p[IX(i,j-1,N)]);
    }
  set_bnd(N, 1, u);
  set_bnd(N, 2, v);
}

operator dens_step(UInt32 N, io Float32 x[], io Float32 x0[], Float32 u[], Float32 v[], Float32 diff, Float32 dt)
{
  add_source(N, x, x0, dt);
  swap(x0, x);
  diffuse(N, 0, x, x0, diff, dt);
  swap(x0, x);
  advect(N, 0, x, x0, u, v, dt);
}

operator vel_step(UInt32 N, io Float32 u[], io Float32 v[], io Float32 u0[], io Float32 v0[], Float32 visc, Float32 dt)
{
  add_source(N, u, u0, dt);
  add_source(N, v, v0, dt);
  swap(u0, u);
  diffuse(N, 1, u, u0, visc, dt);
  swap(v0, v);
  diffuse(N, 2, v, v0, visc, dt);
  project(N, u, v, u0, v0);
  swap(u0, u);
  swap(v0, v);
  advect(N, 1, u, u0, u0, v0, dt);
  advect(N, 2, v, v0, u0, v0, dt);
  project(N, u, v, u0, v0);
}

dfgEntry
{
  if (N <= 2)
  {
    u .resize(0);
    v .resize(0);
    d .resize(0);
    u0.resize(0);
    v0.resize(0);
    d0.resize(0);
    return;
  }
  
  UInt32 size = (N + 2) * (N + 2);
  if (   u .size() != size
      || v .size() != size
      || d .size() != size
      || u0.size() != size
      || v0.size() != size
      || d0.size() != size)
  {
    u .resize(size);
    v .resize(size);
    d .resize(size);
    u0.resize(size);
    v0.resize(size);
    d0.resize(size);
  }

  if (emitterType == 0)
  {
    for (Integer j=0;j<N+2;j++)
      for (Integer i=0;i<N+2;i++)
      {
        u [IX(i,j,N)] = 0;
        v [IX(i,j,N)] = 0;
        d [IX(i,j,N)] = 0;
        u0[IX(i,j,N)] = 0.000000000001;
        v0[IX(i,j,N)] = 0.000000000001;
        d0[IX(i,j,N)] = 0;
      }
  }
  else if (emitterType == 1)
  {
    for (Integer j=0;j<N+2;j++)
      for (Integer i=0;i<N+2;i++)
      {
        u0[IX(i,j,N)] = 0.000000000001;
        v0[IX(i,j,N)] = 0.000000000001;
        d0[IX(i,j,N)] = 0;
        if (j > 2 && j < 7)
        {
          Integer center = Integer((N + 2) * (0.5 + 0.15 * sin(frame * 0.023)));
          if (center >= i - 7 && center <= i + 7)
          {
            u0[IX(i,j,N)] = 0.1 * sin(frame * 0.088);
            v0[IX(i,j,N)] = 0.2 + 0.8 * abs(sin(frame * 0.072));
            d0[IX(i,j,N)] = 22.0 * (sin(frame * 0.052) > 0 ? 1 : -1);
          }
        }
      }
  }
  else if (emitterType == 2)
  {
    for (Integer j=0;j<N+2;j++)
      for (Integer i=0;i<N+2;i++)
      {
        u0[IX(i,j,N)] = 0.000000000001;
        v0[IX(i,j,N)] = 0.000000000001;
        d0[IX(i,j,N)] = 0;
        if (j > (N + 2) / 2 - 4 && j < (N + 2) / 2 + 4)
        {
          Integer center = Integer((N + 2) * (0.5 + 0.15 * sin(frame * 0.023)));
          if (center >= i - 3 && center <= i + 3)
          {
            u0[IX(i,j,N)] = 0.6 * sin(frame * 0.088);
            v0[IX(i,j,N)] = 0.6 * sin(frame * 0.072);
            d0[IX(i,j,N)] = 22.0 * (sin(frame * 0.122) > 0 ? 1 : -1);
          }
        }
      }
  }
  else if (emitterType == 3)
  {
    for (Integer j=0;j<N+2;j++)
      for (Integer i=0;i<N+2;i++)
      {
        u0[IX(i,j,N)] = 0.000000000001;
        v0[IX(i,j,N)] = 0.000000000001;
        d0[IX(i,j,N)] = 0;
        if (j > (N + 2) / 5 && j < (N + 2) / 2)
        {
          if (i > 3 && i < 7)
          {
            u0[IX(i,j,N)] = 0.4 + 0.1 * sin(0.1 * j + frame * 0.088);
            v0[IX(i,j,N)] = 0.01 * sin(frame * 0.072);
            d0[IX(i,j,N)] = 5 + 4 * sin(frame * 0.12);
          }
        }
      }
  }
  else if (emitterType == 4)
  {
    for (Integer j=0;j<N+2;j++)
      for (Integer i=0;i<N+2;i++)
      {
        u0[IX(i,j,N)] = 0.000000000001;
        v0[IX(i,j,N)] = 0.000000000001;
        d0[IX(i,j,N)] = 0;
        if (j > (N + 2) / 2 && j < 4 * (N + 2) / 5)
        {
          if (i > N + 1 - 7 && i < N + 1 - 3)
          {
            u0[IX(i,j,N)] = -0.4 + 0.1 * sin(0.1 * j + frame * 0.085);
            v0[IX(i,j,N)] = 0.01 * sin(frame * 0.0872);
            d0[IX(i,j,N)] = -(5 + 4 * sin(frame * 0.123));
          }
        }
      }
  }
  else if (emitterType == 5)
  {
    for (Integer j=0;j<N+2;j++)
      for (Integer i=0;i<N+2;i++)
      {
        u0[IX(i,j,N)] = 0.000000000001;
        v0[IX(i,j,N)] = 0.000000000001;
        d0[IX(i,j,N)] = 0;
        if (j > (N + 2) / 5 && j < (N + 2) / 2)
        {
          if (i > 3 && i < 7)
          {
            u0[IX(i,j,N)] = 0.4 + 0.1 * sin(0.1 * j + frame * 0.088);
            v0[IX(i,j,N)] = 0.01 * sin(frame * 0.072);
            d0[IX(i,j,N)] = 5 + 4 * sin(frame * 0.12);
          }
        }
        else if (j > (N + 2) / 2 && j < 4 * (N + 2) / 5)
        {
          if (i > N + 1 - 7 && i < N + 1 - 3)
          {
            u0[IX(i,j,N)] = -0.4 + 0.1 * sin(0.1 * j + frame * 0.085);
            v0[IX(i,j,N)] = 0.01 * sin(frame * 0.0872);
            d0[IX(i,j,N)] = -(5 + 4 * sin(frame * 0.123));
          }
        }
      }
  }
  else
  {
    for (Integer j=0;j<N+2;j++)
      for (Integer i=0;i<N+2;i++)
      {
        u0[IX(i,j,N)] = 0.000000000001;
        v0[IX(i,j,N)] = 0.000000000001;
        d0[IX(i,j,N)] = 0;
      }
  }
  
  vel_step(N, u, v, u0, v0, visc, dt);
  dens_step(N, d, d0, u, v, diff, dt);
}
"
              }
            },
          {
            "objectType" : "Var",
            "metadata" : {
              "uiGraphPos" : "{\"x\":74.87700641159999,\"y\":47.9298386574}"
              },
            "name" : "u",
            "ports" : [
              {
                "objectType" : "VarPort",
                "name" : "value",
                "nodePortType" : "IO"
                }
              ],
            "dataType" : "Float32[]"
            },
          {
            "objectType" : "Var",
            "metadata" : {
              "uiGraphPos" : "{\"x\":75.4428709745,\"y\":98.9674363136}"
              },
            "name" : "v",
            "ports" : [
              {
                "objectType" : "VarPort",
                "name" : "value",
                "nodePortType" : "IO"
                }
              ],
            "dataType" : "Float32[]"
            },
          {
            "objectType" : "Var",
            "metadata" : {
              "uiGraphPos" : "{\"x\":181.821464419,\"y\":46.8972687721}"
              },
            "name" : "u0",
            "ports" : [
              {
                "objectType" : "VarPort",
                "name" : "value",
                "nodePortType" : "IO"
                }
              ],
            "dataType" : "Float32[]"
            },
          {
            "objectType" : "Var",
            "metadata" : {
              "uiGraphPos" : "{\"x\":181.82170856,\"y\":100.670897007}"
              },
            "name" : "v0",
            "ports" : [
              {
                "objectType" : "VarPort",
                "name" : "value",
                "nodePortType" : "IO"
                }
              ],
            "dataType" : "Float32[]"
            },
          {
            "objectType" : "Var",
            "metadata" : {
              "uiGraphPos" : "{\"x\":75.2751768827,\"y\":150.671530247}"
              },
            "name" : "d",
            "ports" : [
              {
                "objectType" : "VarPort",
                "name" : "value",
                "nodePortType" : "IO"
                }
              ],
            "dataType" : "Float32[]"
            },
          {
            "objectType" : "Var",
            "metadata" : {
              "uiGraphPos" : "{\"x\":181.379859805,\"y\":152.968496799}"
              },
            "name" : "d0",
            "ports" : [
              {
                "objectType" : "VarPort",
                "name" : "value",
                "nodePortType" : "IO"
                }
              ],
            "dataType" : "Float32[]"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-237.312957764,\"y\":516.479370117}",
              "uiCollapsedState" : "2"
              },
            "name" : "Le_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "name" : "exec",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "lhs",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "rhs",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Scalar" : 1
                  }
                },
              {
                "objectType" : "InstPort",
                "name" : "result",
                "nodePortType" : "Out"
                }
              ],
            "executable" : "Fabric.Core.Logic.Le",
            "presetGUID" : "29580C848A777A42608B45D8DF02D37C"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-78.3173447847,\"y\":216.456533909}",
              "uiCollapsedState" : "2"
              },
            "name" : "If_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "name" : "exec",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "cond",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "if_true",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "if_false",
                "nodePortType" : "In",
                "defaultValues" : {
                  "UInt32" : 100
                  }
                },
              {
                "objectType" : "InstPort",
                "name" : "result",
                "nodePortType" : "Out"
                }
              ],
            "executable" : "Fabric.Core.Control.If",
            "presetGUID" : "3182A478A21643455D549E483D35F831"
            },
          {
            "objectType" : "Get",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-72.97897350789999,\"y\":282.405371189}",
              "uiCollapsedState" : "2"
              },
            "name" : "get",
            "ports" : [
              {
                "objectType" : "GetPort",
                "name" : "value",
                "nodePortType" : "Out"
                }
              ],
            "varPath" : "u"
            },
          {
            "objectType" : "Get",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-72.97897350789999,\"y\":319.405279636}",
              "uiCollapsedState" : "2"
              },
            "name" : "get_2",
            "ports" : [
              {
                "objectType" : "GetPort",
                "name" : "value",
                "nodePortType" : "Out"
                }
              ],
            "varPath" : "v"
            },
          {
            "objectType" : "Get",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-73.97436499600001,\"y\":394.227854133}",
              "uiCollapsedState" : "2"
              },
            "name" : "get_3",
            "ports" : [
              {
                "objectType" : "GetPort",
                "name" : "value",
                "nodePortType" : "Out"
                }
              ],
            "varPath" : "u0"
            },
          {
            "objectType" : "Get",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-73.97436499600001,\"y\":431.227854133}",
              "uiCollapsedState" : "2"
              },
            "name" : "get_4",
            "ports" : [
              {
                "objectType" : "GetPort",
                "name" : "value",
                "nodePortType" : "Out"
                }
              ],
            "varPath" : "v0"
            },
          {
            "objectType" : "Get",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-72.9789733887,\"y\":357.746237397}",
              "uiCollapsedState" : "2"
              },
            "name" : "get_5",
            "ports" : [
              {
                "objectType" : "GetPort",
                "name" : "value",
                "nodePortType" : "Out"
                }
              ],
            "varPath" : "d"
            },
          {
            "objectType" : "Get",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-72.97897350789999,\"y\":467.405310154}",
              "uiCollapsedState" : "2"
              },
            "name" : "get_6",
            "ports" : [
              {
                "objectType" : "GetPort",
                "name" : "value",
                "nodePortType" : "Out"
                }
              ],
            "varPath" : "d0"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":414.341561556,\"y\":273.089686751}"
              },
            "name" : "encode_into_colors_for_image",
            "ports" : [
              {
                "objectType" : "InstPort",
                "name" : "exec",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "N",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "u",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "v",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "d",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "width",
                "nodePortType" : "Out"
                },
              {
                "objectType" : "InstPort",
                "name" : "height",
                "nodePortType" : "Out"
                },
              {
                "objectType" : "InstPort",
                "name" : "colors",
                "nodePortType" : "Out"
                }
              ],
            "definition" : {
              "objectType" : "Func",
              "metadata" : {
                "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
                "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
                },
              "title" : "func",
              "ports" : [
                {
                  "objectType" : "ExecPort",
                  "name" : "exec",
                  "nodePortType" : "IO",
                  "execPortType" : "IO",
                  "typeSpec" : "Execute"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "N",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "u",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "v",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "d",
                  "nodePortType" : "Out",
                  "execPortType" : "In",
                  "typeSpec" : "Float32[]"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "width",
                  "nodePortType" : "In",
                  "execPortType" : "Out",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "height",
                  "nodePortType" : "In",
                  "execPortType" : "Out",
                  "typeSpec" : "UInt32"
                  },
                {
                  "objectType" : "ExecPort",
                  "name" : "colors",
                  "nodePortType" : "In",
                  "execPortType" : "Out",
                  "typeSpec" : "Color[]"
                  }
                ],
              "extDeps" : {},
              "code" : "dfgEntry
{
  // init outputs.
  width  = N + 2;
  height = N + 2;
  colors.resize(d.size());

  // check.
  if (   d.size() != (N + 2) * (N + 2)
      || d.size() != (N + 2) * (N + 2)
      || d.size() != (N + 2) * (N + 2))
  {
    return;
  }
  
  // fill colors[] from inputs.
  UInt32 cIndex = 0;
  for (UInt32 j=0;j<N+2;j++)
  {
    UInt32 uvdIndex = (N + 1 - j) * (N + 2);
    for (UInt32 i=0;i<N+2;i++,cIndex++,uvdIndex++)
    {
      colors[cIndex].set(u[uvdIndex],
                         v[uvdIndex],
                         d[uvdIndex],
                         1.0);
    }
  }
}
"
              }
            },
          {
            "objectType" : "User",
            "metadata" : {
              "uiTitle" : "basic 2D fluid solver",
              "uiGraphPos" : "{\"x\":-280.377746582,\"y\":7.62876081467}",
              "uiGraphSize" : "{\"w\":597.67376709,\"h\":599.271179199}"
              },
            "name" : "backDrop_2",
            "ports" : []
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":791.5465132000001,\"y\":361.443965316}"
              },
            "name" : "Image_2",
            "ports" : [
              {
                "objectType" : "InstPort",
                "name" : "exec",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "width",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "height",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "colors",
                "nodePortType" : "In"
                },
              {
                "objectType" : "InstPort",
                "name" : "flipH",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Boolean" : false
                  }
                },
              {
                "objectType" : "InstPort",
                "name" : "flipV",
                "nodePortType" : "In",
                "defaultValues" : {
                  "Boolean" : false
                  }
                },
              {
                "objectType" : "InstPort",
                "name" : "result",
                "nodePortType" : "Out"
                },
              {
                "objectType" : "InstPort",
                "name" : "clonedResult",
                "nodePortType" : "Out"
                }
              ],
            "executable" : "Fabric.Compounds.Image.Create.Image",
            "presetGUID" : "7717E919BE9326961697AE564CD29E19"
            },
          {
            "objectType" : "Inst",
            "metadata" : {
              "uiGraphPos" : "{\"x\":-241.665649414,\"y\":555.764343262}",
              "uiCollapsedState" : "2"
              },
            "name" : "UInt32_1",
            "ports" : [
              {
                "objectType" : "InstPort",
                "name" : "exec",
                "nodePortType" : "IO"
                },
              {
                "objectType" : "InstPort",
                "name" : "value",
                "nodePortType" : "In"
                }
              ],
            "executable" : "Fabric.Core.Constants.UInt32",
            "presetGUID" : "522214488375FF199C3D64A3DBF3C762"
            }
          ],
        "connections" : {
          "N" : [
            "If_1.if_false"
            ],
          "frame" : [
            "Le_1.lhs"
            ],
          "emitterType" : [
            "UInt32_1.value"
            ],
          "FluidSolver.N" : [
            "encode_into_colors_for_image.N"
            ],
          "FluidSolver.u" : [
            "encode_into_colors_for_image.u"
            ],
          "FluidSolver.v" : [
            "encode_into_colors_for_image.v"
            ],
          "FluidSolver.d" : [
            "encode_into_colors_for_image.d"
            ],
          "Le_1.lhs" : [
            "FluidSolver.frame"
            ],
          "Le_1.result" : [
            "If_1.cond"
            ],
          "If_1.result" : [
            "FluidSolver.N"
            ],
          "get.value" : [
            "FluidSolver.u"
            ],
          "get_2.value" : [
            "FluidSolver.v"
            ],
          "get_3.value" : [
            "FluidSolver.u0"
            ],
          "get_4.value" : [
            "FluidSolver.v0"
            ],
          "get_5.value" : [
            "FluidSolver.d"
            ],
          "get_6.value" : [
            "FluidSolver.d0"
            ],
          "encode_into_colors_for_image.width" : [
            "Image_2.width"
            ],
          "encode_into_colors_for_image.height" : [
            "Image_2.height"
            ],
          "encode_into_colors_for_image.colors" : [
            "Image_2.colors"
            ],
          "Image_2.result" : [
            "imageVelocityAndDensity"
            ],
          "UInt32_1.value" : [
            "FluidSolver.emitterType"
            ]
          }
        }
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-104.019579291,\"y\":-605.661958456}"
        },
      "name" : "DrawPoints_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "name",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "color",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "size",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "pos",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "debugHandle",
          "nodePortType" : "Out"
          }
        ],
      "executable" : "Fabric.Compounds.Points.Display.DrawPoints",
      "presetGUID" : "F858B0DBCA2711E1E8537A8B964E9D76"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-864.5518548490001,\"y\":-469.866626143}",
        "uiCollapsedState" : "2"
        },
      "name" : "ClearBorders_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "image",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "color",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "left",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "right",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "top",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "bottom",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "excludeCorners",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "result",
          "nodePortType" : "Out"
          }
        ],
      "executable" : "Fabric.Compounds.Image.Modify.ClearBorders",
      "presetGUID" : "ECA142B106D781072484D6BB7E93F247"
      },
    {
      "objectType" : "User",
      "metadata" : {
        "uiTitle" : "a basic 2D fluid solver",
        "uiGraphPos" : "{\"x\":-1151.05130553,\"y\":-594.048266768}",
        "uiGraphSize" : "{\"w\":464.514648438,\"h\":245.246139526}"
        },
      "name" : "backDrop_3",
      "ports" : []
      },
    {
      "objectType" : "Var",
      "metadata" : {
        "uiGraphPos" : "{\n  \"x\" : -574.6117248535156,\n  \"y\" : -1024.156646728516\n  }"
        },
      "name" : "positions",
      "ports" : [
        {
          "objectType" : "VarPort",
          "name" : "value",
          "nodePortType" : "IO"
          }
        ],
      "dataType" : "Vec3[]"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-686.403198242,\"y\":-822.9453125}",
        "uiCollapsedState" : "2"
        },
      "name" : "DecomposeXfoArray_2",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "value",
          "nodePortType" : "In"
          },
        {
          "objectType" : "InstPort",
          "name" : "ori",
          "nodePortType" : "Out"
          },
        {
          "objectType" : "InstPort",
          "name" : "tr",
          "nodePortType" : "Out"
          },
        {
          "objectType" : "InstPort",
          "name" : "sc",
          "nodePortType" : "Out"
          }
        ],
      "executable" : "Fabric.Exts.Math.Xfo.DecomposeXfoArray",
      "presetGUID" : "F1CE36998E153872EE926747BEB0E7A6"
      },
    {
      "objectType" : "Set",
      "metadata" : {
        "uiGraphPos" : "{\n  \"x\" : -563.3491516113281,\n  \"y\" : -829.1446838378906\n  }"
        },
      "name" : "set",
      "ports" : [
        {
          "objectType" : "SetPort",
          "name" : "value",
          "nodePortType" : "IO"
          }
        ],
      "varPath" : "positions"
      },
    {
      "objectType" : "User",
      "metadata" : {
        "uiTitle" : "if frame <= 1 then initialize the variable 'positions'",
        "uiGraphPos" : "{\n  \"x\" : -1008.688446044922,\n  \"y\" : -1065.470062255859\n  }",
        "uiGraphSize" : "{\"w\":752.612426758,\"h\":335.042144775}"
        },
      "name" : "backDrop",
      "ports" : []
      },
    {
      "objectType" : "Get",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-531.163484931,\"y\":-625.583345175}"
        },
      "name" : "get",
      "ports" : [
        {
          "objectType" : "GetPort",
          "name" : "value",
          "nodePortType" : "Out"
          }
        ],
      "varPath" : "positions"
      },
    {
      "objectType" : "Inst",
      "metadata" : {
        "uiGraphPos" : "{\"x\":-333.958761454,\"y\":-596.483276367}"
        },
      "name" : "ModifyInPlace_1",
      "ports" : [
        {
          "objectType" : "InstPort",
          "name" : "exec",
          "nodePortType" : "IO"
          },
        {
          "objectType" : "InstPort",
          "name" : "array",
          "nodePortType" : "IO"
          }
        ],
      "blocks" : [
        {
          "name" : "modify",
          "objectType" : "InstBlock",
          "ports" : [
            {
              "objectType" : "InstBlockPort",
              "name" : "initialGridSize",
              "nodePortType" : "In",
              "outsidePortType" : "In"
              },
            {
              "objectType" : "InstBlockPort",
              "name" : "velocityImage",
              "nodePortType" : "In",
              "outsidePortType" : "In"
              },
            {
              "objectType" : "InstBlockPort",
              "name" : "advection",
              "nodePortType" : "In",
              "defaultValues" : {
                "Scalar" : 1
                },
              "outsidePortType" : "In"
              }
            ],
          "exec" : {
            "objectType" : "Graph",
            "metadata" : {
              "uiGraphZoom" : "{\n  \"value\" : 0.8618469834327698\n  }",
              "uiGraphPan" : "{\n  \"x\" : -4.772043890580335,\n  \"y\" : 70.12322674646811\n  }"
              },
            "title" : "",
            "ports" : [
              {
                "objectType" : "ExecPort",
                "name" : "initialGridSize",
                "nodePortType" : "Out",
                "defaultValues" : {
                  "Scalar" : 0
                  },
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "ExecPort",
                "name" : "velocityImage",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Image2DColor"
                },
              {
                "objectType" : "ExecPort",
                "metadata" : {
                  "uiRange" : "(0, 2)"
                  },
                "name" : "advection",
                "nodePortType" : "Out",
                "defaultValues" : {
                  "Scalar" : 0
                  },
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                }
              ],
            "extDeps" : {},
            "nodes" : [
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":999.008164703811,\"y\":162.3180153285235}",
                  "uiCollapsedState" : "1"
                  },
                "name" : "Sample_1",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "this",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "u",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "v",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "result",
                    "nodePortType" : "Out"
                    }
                  ],
                "executable" : "Fabric.Exts.Images.Image2DColor.Sample",
                "presetGUID" : "5EE183FCD6B5D0FD2460A4273563D3B5"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":1121.184502899612,\"y\":175.013449898836}",
                  "uiCollapsedState" : "1"
                  },
                "name" : "DecomposeColor_1",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "value",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "r",
                    "nodePortType" : "Out"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "g",
                    "nodePortType" : "Out"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "b",
                    "nodePortType" : "Out"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "a",
                    "nodePortType" : "Out"
                    }
                  ],
                "executable" : "Fabric.Exts.Math.Color.DecomposeColor",
                "presetGUID" : "F1CE36998E153872EE926747BEB0E7A6"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiComment" : "final velocity",
                  "uiGraphPos" : "{\"x\":1309.369403898681,\"y\":196.7860851203172}",
                  "uiCollapsedState" : "1",
                  "uiCommentExpanded" : "true"
                  },
                "name" : "ComposeVec3_1",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "x",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "y",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "z",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "result",
                    "nodePortType" : "Out"
                    }
                  ],
                "executable" : "Fabric.Exts.Math.Vec3.ComposeVec3",
                "presetGUID" : "C61287D19D84D9733903DDC14FABD4AF"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":254.8287747501977,\"y\":253.812796822664}",
                  "uiCollapsedState" : "2"
                  },
                "name" : "Div_1",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "lhs",
                    "nodePortType" : "In",
                    "defaultValues" : {
                      "Scalar" : 1
                      }
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "rhs",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "result",
                    "nodePortType" : "Out"
                    }
                  ],
                "executable" : "Fabric.Core.Math.Div",
                "presetGUID" : "695E8145F8F42293FBC88BD348869892"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":442.8790982365258,\"y\":253.700247994539}",
                  "uiCollapsedState" : "2"
                  },
                "name" : "MultiplyScalar_2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "this",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "other",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "result",
                    "nodePortType" : "Out"
                    }
                  ],
                "executable" : "Fabric.Exts.Math.Func.MultiplyScalar",
                "presetGUID" : "8EC64304FD2D82AEC7EBB545E4A9709B"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":608.9675686955102,\"y\":253.597464791414}",
                  "uiCollapsedState" : "2"
                  },
                "name" : "Add_2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "lhs",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "rhs",
                    "nodePortType" : "In",
                    "defaultValues" : {
                      "Vec3" : {
                        "x" : 0.5,
                        "y" : 0.5,
                        "z" : 0
                        }
                      }
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "result",
                    "nodePortType" : "Out"
                    }
                  ],
                "executable" : "Fabric.Core.Math.Add",
                "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":856.2312710880883,\"y\":297.776877633211}",
                  "uiCollapsedState" : "2"
                  },
                "name" : "Sub_1",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "lhs",
                    "nodePortType" : "In",
                    "defaultValues" : {
                      "Vec3" : {
                        "x" : 1,
                        "y" : 1,
                        "z" : 0
                        },
                      "Scalar" : 1
                      }
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "rhs",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "result",
                    "nodePortType" : "Out"
                    }
                  ],
                "executable" : "Fabric.Core.Math.Sub",
                "presetGUID" : "F9754B19F43BC017056B8BA291E7B8B4"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":735.3226254582055,\"y\":230.7372352992265}",
                  "uiCollapsedState" : "1"
                  },
                "name" : "DecomposeVec3_2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "value",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "x",
                    "nodePortType" : "Out"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "y",
                    "nodePortType" : "Out"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "z",
                    "nodePortType" : "Out"
                    }
                  ],
                "executable" : "Fabric.Exts.Math.Vec3.DecomposeVec3",
                "presetGUID" : "F1CE36998E153872EE926747BEB0E7A6"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":222.9545682072289,\"y\":185.4481422816485}",
                  "uiCollapsedState" : "2"
                  },
                "name" : "PassThrough",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "value",
                    "nodePortType" : "IO"
                    }
                  ],
                "definition" : {
                  "objectType" : "Func",
                  "title" : "PassThrough",
                  "ports" : [
                    {
                      "objectType" : "ExecPort",
                      "name" : "exec",
                      "nodePortType" : "IO",
                      "execPortType" : "IO",
                      "typeSpec" : "Execute"
                      },
                    {
                      "objectType" : "ExecPort",
                      "name" : "value",
                      "nodePortType" : "IO",
                      "execPortType" : "IO",
                      "typeSpec" : "$TYPE$"
                      }
                    ],
                  "extDeps" : {},
                  "code" : "dfgEntry {
  //result = lhs + rhs;
}
"
                  }
                },
              {
                "objectType" : "User",
                "metadata" : {
                  "uiTitle" : "convert position into uv and sample the pixel in the image",
                  "uiGraphPos" : "{\"x\":203.1253445744164,\"y\":120.7982094203202}",
                  "uiGraphSize" : "{\"w\":1077.8651123,\"h\":223.595230103}"
                  },
                "name" : "backDrop",
                "ports" : []
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":1588.299026906181,\"y\":-47.19179762242496}"
                  },
                "name" : "add_velocity_to_position",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "position",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "velocity",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "amount",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "initialGridSize",
                    "nodePortType" : "In"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "result",
                    "nodePortType" : "Out"
                    }
                  ],
                "definition" : {
                  "objectType" : "Graph",
                  "metadata" : {
                    "uiGraphZoom" : "{\n  \"value\" : 0.9159960150718689\n  }",
                    "uiGraphPan" : "{\n  \"x\" : -276.7957147596317,\n  \"y\" : -156.3064151653866\n  }"
                    },
                  "title" : "add_velocity_to_position",
                  "ports" : [
                    {
                      "objectType" : "ExecPort",
                      "name" : "exec",
                      "nodePortType" : "IO",
                      "execPortType" : "IO",
                      "typeSpec" : "Execute"
                      },
                    {
                      "objectType" : "ExecPort",
                      "name" : "position",
                      "nodePortType" : "Out",
                      "execPortType" : "In"
                      },
                    {
                      "objectType" : "ExecPort",
                      "name" : "velocity",
                      "nodePortType" : "Out",
                      "execPortType" : "In"
                      },
                    {
                      "objectType" : "ExecPort",
                      "name" : "amount",
                      "nodePortType" : "Out",
                      "execPortType" : "In",
                      "typeSpec" : "Scalar"
                      },
                    {
                      "objectType" : "ExecPort",
                      "name" : "initialGridSize",
                      "nodePortType" : "Out",
                      "execPortType" : "In",
                      "typeSpec" : "Scalar"
                      },
                    {
                      "objectType" : "ExecPort",
                      "name" : "result",
                      "nodePortType" : "In",
                      "execPortType" : "Out"
                      }
                    ],
                  "extDeps" : {},
                  "nodes" : [
                    {
                      "objectType" : "Inst",
                      "metadata" : {
                        "uiGraphPos" : "{\"x\":907.970687389,\"y\":189.100723982}",
                        "uiCollapsedState" : "1"
                        },
                      "name" : "Add_1",
                      "ports" : [
                        {
                          "objectType" : "InstPort",
                          "name" : "exec",
                          "nodePortType" : "IO"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "lhs",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "rhs",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "result",
                          "nodePortType" : "Out"
                          }
                        ],
                      "executable" : "Fabric.Core.Math.Add",
                      "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7"
                      },
                    {
                      "objectType" : "Inst",
                      "metadata" : {
                        "uiGraphPos" : "{\"x\":716.2844238279999,\"y\":252.301696777}"
                        },
                      "name" : "MultiplyScalar_1",
                      "ports" : [
                        {
                          "objectType" : "InstPort",
                          "name" : "exec",
                          "nodePortType" : "IO"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "this",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "other",
                          "nodePortType" : "In",
                          "defaultValues" : {
                            "Scalar" : 1
                            }
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "result",
                          "nodePortType" : "Out"
                          }
                        ],
                      "executable" : "Fabric.Exts.Math.Func.MultiplyScalar",
                      "presetGUID" : "8EC64304FD2D82AEC7EBB545E4A9709B"
                      },
                    {
                      "objectType" : "Inst",
                      "metadata" : {
                        "uiGraphPos" : "{\"x\":1050.0,\"y\":340.0}"
                        },
                      "name" : "DecomposeVec3_1",
                      "ports" : [
                        {
                          "objectType" : "InstPort",
                          "name" : "exec",
                          "nodePortType" : "IO"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "value",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "x",
                          "nodePortType" : "Out"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "y",
                          "nodePortType" : "Out"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "z",
                          "nodePortType" : "Out"
                          }
                        ],
                      "executable" : "Fabric.Exts.Math.Vec3.DecomposeVec3",
                      "presetGUID" : "F1CE36998E153872EE926747BEB0E7A6"
                      },
                    {
                      "objectType" : "Inst",
                      "metadata" : {
                        "uiGraphPos" : "{\"x\":1049.4901123,\"y\":490.30846715}",
                        "uiCollapsedState" : "2"
                        },
                      "name" : "Mul_1",
                      "ports" : [
                        {
                          "objectType" : "InstPort",
                          "name" : "exec",
                          "nodePortType" : "IO"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "lhs",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "rhs",
                          "nodePortType" : "In",
                          "defaultValues" : {
                            "Scalar" : -0.5
                            }
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "result",
                          "nodePortType" : "Out"
                          }
                        ],
                      "executable" : "Fabric.Core.Math.Mul",
                      "presetGUID" : "CC951B43BB879483B46EFF7965692350"
                      },
                    {
                      "objectType" : "Inst",
                      "metadata" : {
                        "uiGraphPos" : "{\"x\":1050.48136997,\"y\":526.296447754}",
                        "uiCollapsedState" : "2"
                        },
                      "name" : "Mul_2",
                      "ports" : [
                        {
                          "objectType" : "InstPort",
                          "name" : "exec",
                          "nodePortType" : "IO"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "lhs",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "rhs",
                          "nodePortType" : "In",
                          "defaultValues" : {
                            "Scalar" : 0.5
                            }
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "result",
                          "nodePortType" : "Out"
                          }
                        ],
                      "executable" : "Fabric.Core.Math.Mul",
                      "presetGUID" : "CC951B43BB879483B46EFF7965692350"
                      },
                    {
                      "objectType" : "Inst",
                      "metadata" : {
                        "uiGraphPos" : "{\"x\":1279.72819877,\"y\":384.561391592}",
                        "uiCollapsedState" : "2"
                        },
                      "name" : "Clamp_1",
                      "ports" : [
                        {
                          "objectType" : "InstPort",
                          "name" : "exec",
                          "nodePortType" : "IO"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "this",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "min",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "max",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "result",
                          "nodePortType" : "Out"
                          }
                        ],
                      "executable" : "Fabric.Exts.Math.Func.Clamp",
                      "presetGUID" : "006FF1E5FC134CF3FA33D72FAA89B665"
                      },
                    {
                      "objectType" : "Inst",
                      "metadata" : {
                        "uiGraphPos" : "{\"x\":1611.14477539,\"y\":361.875652552}"
                        },
                      "name" : "ComposeVec3_1",
                      "ports" : [
                        {
                          "objectType" : "InstPort",
                          "name" : "exec",
                          "nodePortType" : "IO"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "x",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "y",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "z",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "result",
                          "nodePortType" : "Out"
                          }
                        ],
                      "executable" : "Fabric.Exts.Math.Vec3.ComposeVec3",
                      "presetGUID" : "C61287D19D84D9733903DDC14FABD4AF"
                      },
                    {
                      "objectType" : "Inst",
                      "metadata" : {
                        "uiGraphPos" : "{\"x\":1423.53547311,\"y\":407.70392108}",
                        "uiCollapsedState" : "2"
                        },
                      "name" : "Clamp_2",
                      "ports" : [
                        {
                          "objectType" : "InstPort",
                          "name" : "exec",
                          "nodePortType" : "IO"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "this",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "min",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "max",
                          "nodePortType" : "In"
                          },
                        {
                          "objectType" : "InstPort",
                          "name" : "result",
                          "nodePortType" : "Out"
                          }
                        ],
                      "executable" : "Fabric.Exts.Math.Func.Clamp",
                      "presetGUID" : "006FF1E5FC134CF3FA33D72FAA89B665"
                      }
                    ],
                  "connections" : {
                    "position" : [
                      "Add_1.lhs"
                      ],
                    "velocity" : [
                      "MultiplyScalar_1.this"
                      ],
                    "amount" : [
                      "MultiplyScalar_1.other"
                      ],
                    "initialGridSize" : [
                      "Mul_1.lhs",
                      "Mul_2.lhs"
                      ],
                    "Add_1.result" : [
                      "DecomposeVec3_1.value"
                      ],
                    "MultiplyScalar_1.result" : [
                      "Add_1.rhs"
                      ],
                    "DecomposeVec3_1.x" : [
                      "Clamp_1.this"
                      ],
                    "DecomposeVec3_1.y" : [
                      "Clamp_2.this"
                      ],
                    "DecomposeVec3_1.z" : [
                      "ComposeVec3_1.z"
                      ],
                    "Mul_1.result" : [
                      "Clamp_1.min"
                      ],
                    "Mul_2.result" : [
                      "Clamp_1.max"
                      ],
                    "Clamp_1.min" : [
                      "Clamp_2.min"
                      ],
                    "Clamp_1.max" : [
                      "Clamp_2.max"
                      ],
                    "Clamp_1.result" : [
                      "ComposeVec3_1.x"
                      ],
                    "ComposeVec3_1.result" : [
                      "result"
                      ],
                    "Clamp_2.result" : [
                      "ComposeVec3_1.y"
                      ]
                    }
                  }
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":254.001972258181,\"y\":19.90260123357504}",
                  "uiCollapsedState" : "2"
                  },
                "name" : "Scalar_1",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "value",
                    "nodePortType" : "In"
                    }
                  ],
                "executable" : "Fabric.Core.Constants.Scalar",
                "presetGUID" : "E0E96C6E234F70063BC98887B83327DC"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":254.4930034281809,\"y\":44.92037891457505}",
                  "uiCollapsedState" : "2"
                  },
                "name" : "Scalar_2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "value",
                    "nodePortType" : "In"
                    }
                  ],
                "executable" : "Fabric.Core.Constants.Scalar",
                "presetGUID" : "E0E96C6E234F70063BC98887B83327DC"
                },
              {
                "objectType" : "Inst",
                "metadata" : {
                  "uiGraphPos" : "{\"x\":249.3346748951809,\"y\":-47.61970711642496}"
                  },
                "name" : "Vec3_2",
                "ports" : [
                  {
                    "objectType" : "InstPort",
                    "name" : "exec",
                    "nodePortType" : "IO"
                    },
                  {
                    "objectType" : "InstPort",
                    "name" : "value",
                    "nodePortType" : "In"
                    }
                  ],
                "executable" : "Fabric.Exts.Math.Constants.Vec3",
                "presetGUID" : "A574B316321209337ABEAC56EF1FA6B9"
                }
              ],
            "connections" : {
              "originalValue" : [
                "Vec3_2.value"
                ],
              "initialGridSize" : [
                "Scalar_2.value",
                "Div_1.rhs"
                ],
              "velocityImage" : [
                "PassThrough.value"
                ],
              "advection" : [
                "Scalar_1.value"
                ],
              "Sample_1.result" : [
                "DecomposeColor_1.value"
                ],
              "DecomposeColor_1.r" : [
                "ComposeVec3_1.x"
                ],
              "DecomposeColor_1.g" : [
                "ComposeVec3_1.y"
                ],
              "ComposeVec3_1.result" : [
                "add_velocity_to_position.velocity"
                ],
              "Div_1.result" : [
                "MultiplyScalar_2.other"
                ],
              "MultiplyScalar_2.result" : [
                "Add_2.lhs"
                ],
              "Add_2.result" : [
                "DecomposeVec3_2.value"
                ],
              "Sub_1.result" : [
                "Sample_1.v"
                ],
              "DecomposeVec3_2.x" : [
                "Sample_1.u"
                ],
              "DecomposeVec3_2.y" : [
                "Sub_1.rhs"
                ],
              "PassThrough.value" : [
                "Sample_1.this"
                ],
              "add_velocity_to_position.result" : [
                "newValue"
                ],
              "Scalar_1.value" : [
                "add_velocity_to_position.amount"
                ],
              "Scalar_2.value" : [
                "add_velocity_to_position.initialGridSize"
                ],
              "Vec3_2.value" : [
                "MultiplyScalar_2.this",
                "add_velocity_to_position.position"
                ]
              }
            }
          }
        ],
      "executable" : "Fabric.Compounds.Blocks.Array.ModifyInPlace",
      "presetGUID" : "9C422701FE600EEEEA66D30DD488C002"
      }
    ],
  "connections" : {
    "timeline" : [
      "Scalar_2.value",
      "Basic_2D_Fluid_Solver.frame"
      ],
    "numX" : [
      "XfoGrid_1.numX"
      ],
    "numY" : [
      "XfoGrid_1.numY"
      ],
    "XfoGrid_1.xfo" : [
      "DecomposeXfoArray_2.value"
      ],
    "Le_1.result" : [
      "If_1.cond"
      ],
    "If_1.exec" : [
      "init_xfos"
      ],
    "Scalar_1.value" : [
      "XfoGrid_1.sizeY",
      "XfoGrid_1.sizeX",
      "ModifyInPlace_1.modify.initialGridSize"
      ],
    "Scalar_2.value" : [
      "Le_1.lhs"
      ],
    "Basic_2D_Fluid_Solver.imageVelocityAndDensity" : [
      "ClearBorders_1.image"
      ],
    "DrawPoints_1.debugHandle" : [
      "debugHandle"
      ],
    "ClearBorders_1.result" : [
      "ModifyInPlace_1.modify.velocityImage"
      ],
    "DecomposeXfoArray_2.tr" : [
      "set.value"
      ],
    "set.value" : [
      "If_1.if_true"
      ],
    "get.value" : [
      "ModifyInPlace_1.array"
      ],
    "ModifyInPlace_1.array" : [
      "DrawPoints_1.pos"
      ]
    },
  "requiredPresets" : {
    "Fabric.Compounds.Instanciate.XfoGrid" : {
      "objectType" : "Graph",
      "metadata" : {
        "uiTooltip" : "Generates a 2D/3D grid of xfos.",
        "uiGraphPan" : "{\"x\": -27, \"y\": -122}"
        },
      "title" : "XfoGrid",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(0.1, 20)"
            },
          "name" : "sizeX",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 10
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(0.1, 20)"
            },
          "name" : "sizeY",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 1
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(0.1, 20)"
            },
          "name" : "sizeZ",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 10
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(1, 21)"
            },
          "name" : "numX",
          "nodePortType" : "Out",
          "defaultValues" : {
            "UInt32" : 10
            },
          "execPortType" : "In",
          "typeSpec" : "UInt32"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(1, 21)"
            },
          "name" : "numY",
          "nodePortType" : "Out",
          "defaultValues" : {
            "UInt32" : 1
            },
          "execPortType" : "In",
          "typeSpec" : "UInt32"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(1, 21)"
            },
          "name" : "numZ",
          "nodePortType" : "Out",
          "defaultValues" : {
            "UInt32" : 10
            },
          "execPortType" : "In",
          "typeSpec" : "UInt32"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(0, 1)"
            },
          "name" : "adjustScale",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 1
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "scale",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Vec3" : {
              "x" : 0.8999999761581421,
              "y" : 0.8999999761581421,
              "z" : 0.8999999761581421
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(0, 1)"
            },
          "name" : "alignOrientation",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 0
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "lookAt",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Vec3" : {
              "x" : 0.001000000047497451,
              "y" : 0.002000000094994903,
              "z" : 0.003000000026077032
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "ExecPort",
          "name" : "upVector",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Vec3" : {
              "x" : 1,
              "y" : 2,
              "z" : 3
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "ExecPort",
          "name" : "xfo",
          "nodePortType" : "In",
          "execPortType" : "Out"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "DA77CD19A72FF084A7C343AC8F2C7D23",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 256.823, \"y\": 180.692}"
            },
          "name" : "applyXfoGrid",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "sizeX",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 10
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "sizeY",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 10
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "sizeZ",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 10
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "numX",
              "nodePortType" : "In",
              "defaultValues" : {
                "UInt32" : 10
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "numY",
              "nodePortType" : "In",
              "defaultValues" : {
                "UInt32" : 10
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "numZ",
              "nodePortType" : "In",
              "defaultValues" : {
                "UInt32" : 10
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "adjustScale",
              "nodePortType" : "In",
              "defaultValues" : {
                "Boolean" : true,
                "Vec3" : {
                  "x" : 1,
                  "y" : 1,
                  "z" : 1
                  },
                "Float32" : 0
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "scale",
              "nodePortType" : "In",
              "defaultValues" : {
                "Boolean" : true,
                "Vec3" : {
                  "x" : 1,
                  "y" : 1,
                  "z" : 1
                  }
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "alignOrientation",
              "nodePortType" : "In",
              "defaultValues" : {
                "Boolean" : true,
                "Float32" : 0
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "lookAt",
              "nodePortType" : "In",
              "defaultValues" : {
                "Vec3" : {
                  "x" : 0.001000000047497451,
                  "y" : 0.002000000094994903,
                  "z" : 0.003000000026077032
                  }
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "upVector",
              "nodePortType" : "In",
              "defaultValues" : {
                "Vec3" : {
                  "x" : 0.1110000014305115,
                  "y" : 1.110999941825867,
                  "z" : 0.1110000014305115
                  }
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "xfo",
              "nodePortType" : "Out"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "title" : "applyXfoGrid",
            "ports" : [
              {
                "objectType" : "ExecPort",
                "name" : "exec",
                "nodePortType" : "IO",
                "execPortType" : "IO",
                "typeSpec" : "Execute"
                },
              {
                "objectType" : "ExecPort",
                "name" : "sizeX",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "ExecPort",
                "name" : "sizeY",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "ExecPort",
                "name" : "sizeZ",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "ExecPort",
                "name" : "numX",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "UInt32"
                },
              {
                "objectType" : "ExecPort",
                "name" : "numY",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "UInt32"
                },
              {
                "objectType" : "ExecPort",
                "name" : "numZ",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "UInt32"
                },
              {
                "objectType" : "ExecPort",
                "name" : "adjustScale",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "ExecPort",
                "name" : "scale",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Vec3"
                },
              {
                "objectType" : "ExecPort",
                "name" : "alignOrientation",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Scalar"
                },
              {
                "objectType" : "ExecPort",
                "name" : "lookAt",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Vec3"
                },
              {
                "objectType" : "ExecPort",
                "name" : "upVector",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Vec3"
                },
              {
                "objectType" : "ExecPort",
                "name" : "xfo",
                "nodePortType" : "In",
                "execPortType" : "Out",
                "typeSpec" : "Xfo[]"
                }
              ],
            "extDeps" : {},
            "code" : "dfgEntry
{
  // init output.
  Xfo xfo[];
  xfo.resize(numX * numY * numZ);
  
  // nothing to do?
  if (xfo.size() == 0)
    return;

  // prepare.
  Quat q;
  Vec3 s, t, tInc;
  tInc.x = sizeX * (numX > 1 ? 1.0 / (numX - 1) : 1);
  tInc.y = sizeY * (numY > 1 ? 1.0 / (numY - 1) : 1);
  tInc.z = sizeZ * (numZ > 1 ? 1.0 / (numZ - 1) : 1);
  s.set(1, 1, 1);
  s = scale * s.linearInterpolate(tInc, adjustScale);

  // do it.
  UInt32 index = 0;
  t.z = -0.5 * (numZ > 1 ? sizeZ : 0);
  for (UInt32 iz=0;iz<numZ;iz++)
  {
    t.y = -0.5 * (numY > 1 ? sizeY : 0);
    for (UInt32 iy=0;iy<numY;iy++)
    {
      t.x = -0.5 * (numX > 1 ? sizeX : 0);
      for (UInt32 ix=0;ix<numX;ix++)
      {
        if (alignOrientation <= 0)  xfo[index].ori.setIdentity();
        else
        {
          q.setFromDirectionAndUpvector(t - lookAt, upVector);
          if (alignOrientation >= 1)  xfo[index].ori = q;
          else                        xfo[index].ori = Quat().linearInterpolate(q, alignOrientation);
        }
        xfo[index].sc = s;
        xfo[index].tr = t;
        index++;
        t.x += tInc.x;
      }
      t.y += tInc.y;
    }
    t.z += tInc.z;
  }
}
"
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 623.151, \"y\": 421.924}"
            },
          "name" : "Cache",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "value",
              "nodePortType" : "In"
              }
            ],
          "executable" : "Fabric.Core.Data.Cache",
          "presetGUID" : "D903AFD981FE9214C69943F542D5FD60"
          }
        ],
      "connections" : {
        "sizeX" : [
          "applyXfoGrid.sizeX"
          ],
        "sizeY" : [
          "applyXfoGrid.sizeY"
          ],
        "sizeZ" : [
          "applyXfoGrid.sizeZ"
          ],
        "numX" : [
          "applyXfoGrid.numX"
          ],
        "numY" : [
          "applyXfoGrid.numY"
          ],
        "numZ" : [
          "applyXfoGrid.numZ"
          ],
        "adjustScale" : [
          "applyXfoGrid.adjustScale"
          ],
        "scale" : [
          "applyXfoGrid.scale"
          ],
        "alignOrientation" : [
          "applyXfoGrid.alignOrientation"
          ],
        "lookAt" : [
          "applyXfoGrid.lookAt"
          ],
        "upVector" : [
          "applyXfoGrid.upVector"
          ],
        "applyXfoGrid.xfo" : [
          "Cache.value"
          ],
        "Cache.value" : [
          "xfo"
          ]
        }
      },
    "Fabric.Core.Data.Cache" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 214,\n  \"g\" : 191,\n  \"b\" : 103\n  }",
        "uiAlwaysShowDaisyChainPorts" : "true",
        "uiHeaderColor" : "{\n  \"r\" : 188,\n  \"g\" : 129,\n  \"b\" : 83\n  }"
        },
      "title" : "Cache",
      "cacheRule" : "always",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "value",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "D903AFD981FE9214C69943F542D5FD60",
      "code" : "dfgEntry {
}
"
      },
    "Fabric.Core.Logic.Le" : {
      "objectType" : "Func",
      "title" : "Le <=",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "lhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "rhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Boolean"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "29580C848A777A42608B45D8DF02D37C",
      "code" : "
dfgEntry {
	result = lhs <= rhs;
}
"
      },
    "Fabric.Core.Control.If" : {
      "objectType" : "Func",
      "title" : "If",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "cond",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "if_true",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "if_false",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "3182A478A21643455D549E483D35F831",
      "code" : "
dfgEntry {
	result = cond ? if_true : if_false;
}
"
      },
    "Fabric.Core.Constants.Scalar" : {
      "objectType" : "Func",
      "metadata" : {
        "uiAlwaysShowDaisyChainPorts" : "true"
        },
      "title" : "Scalar",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "value",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "E0E96C6E234F70063BC98887B83327DC",
      "code" : "dfgEntry {
}
"
      },
    "Fabric.Compounds.Image.Create.Image" : {
      "objectType" : "Graph",
      "metadata" : {
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiNodeColor" : "{\n  \"r\" : 144,\n  \"g\" : 130,\n  \"b\" : 120\n  }",
        "uiGraphZoom" : "{\n  \"value\" : 0.8835999965667725\n  }",
        "uiTooltip" : "creates an image and sets its pixel from the input color array",
        "uiGraphPan" : "{\n  \"x\" : 676.49462890625,\n  \"y\" : 155.0182037353516\n  }"
        },
      "title" : "Image",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "defaultValues" : {
            "Execute" : {}
            },
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(16, 1280)"
            },
          "name" : "width",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Integer" : 720
            },
          "execPortType" : "In",
          "typeSpec" : "Integer"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiRange" : "(16, 1280)"
            },
          "name" : "height",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Integer" : 576
            },
          "execPortType" : "In",
          "typeSpec" : "Integer"
          },
        {
          "objectType" : "ExecPort",
          "name" : "colors",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color[]" : []
            },
          "execPortType" : "In",
          "typeSpec" : "Color[]"
          },
        {
          "objectType" : "ExecPort",
          "name" : "flipH",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : false
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "flipV",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : false
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "defaultValues" : {
            "Image2DColor" : null
            },
          "execPortType" : "Out",
          "typeSpec" : "Image2DColor"
          },
        {
          "objectType" : "ExecPort",
          "name" : "clonedResult",
          "nodePortType" : "In",
          "defaultValues" : {
            "Image2DColor" : null
            },
          "execPortType" : "Out",
          "typeSpec" : "Image2DColor"
          }
        ],
      "extDeps" : {
        "OpenImageIO" : "*",
        "FileIO" : "*",
        "Images" : "*"
        },
      "presetGUID" : "7717E919BE9326961697AE564CD29E19",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":-95.0,\"y\":-22.0}"
            },
          "name" : "applyImage",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "resX",
              "nodePortType" : "In",
              "defaultValues" : {
                "Integer" : 720
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "resY",
              "nodePortType" : "In",
              "defaultValues" : {
                "Integer" : 576
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "colors",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "flipH",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "flipV",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "image",
              "nodePortType" : "Out"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "metadata" : {
              "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
              "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
              },
            "title" : "applyLoadImage",
            "ports" : [
              {
                "objectType" : "ExecPort",
                "name" : "exec",
                "nodePortType" : "IO",
                "execPortType" : "IO",
                "typeSpec" : "Execute"
                },
              {
                "objectType" : "ExecPort",
                "name" : "resX",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Integer"
                },
              {
                "objectType" : "ExecPort",
                "name" : "resY",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Integer"
                },
              {
                "objectType" : "ExecPort",
                "name" : "colors",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Color[]"
                },
              {
                "objectType" : "ExecPort",
                "name" : "flipH",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Boolean"
                },
              {
                "objectType" : "ExecPort",
                "name" : "flipV",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Boolean"
                },
              {
                "objectType" : "ExecPort",
                "name" : "image",
                "nodePortType" : "In",
                "execPortType" : "Out",
                "typeSpec" : "Image2DColor"
                }
              ],
            "extDeps" : {},
            "code" : "require Math;
require OpenImageIO;
require Images;

dfgEntry
{ 
  // init the output.
  image   = Image2DColor();

  // check inputs.
  if (resX <= 0 || resY <=0)
    return;
  
  // do it.
  Integer numPixels = resX * resY;
  image.resize(resX, resY);
  if (colors.size() >= image.pixels.size())
  {
    for (UInt32 i=0;i<image.pixels.size();i++)
      image.pixels[i] = colors[i];
  }
  else
  {
    for (UInt32 i=0;i<colors.size();i++)
      image.pixels[i] = colors[i];
    for (UInt32 i=colors.size()+1;i<image.pixels.size();i++)
      image.pixels[i].set(0.0, 0.0, 0.0, 0.0);
  }
  
  // h-flip.
  if (flipH)
  {
    for (UInt32 j=0;j<resY;j++)
    {
      UInt32 offset = j * resX;
      for (UInt32 i=0;i<resX/2;i++)
      {
        Color mem = image.pixels[offset + i];
        image.pixels[offset + i] = image.pixels[offset + resX - 1 - i];
        image.pixels[offset + resX - 1 - i] = mem;
      }
    }
  }

  // v-flip.
  if (flipV)
  {
    for (UInt32 j=0;j<resY/2;j++)
    {
      UInt32 offset1 = j * resX;
      UInt32 offset2 = (resY - 1 - j) * resX;
      for (UInt32 i=0;i<resX;i++,offset1++,offset2++)
      {
        Color mem = image.pixels[offset1];
        image.pixels[offset1] = image.pixels[offset2];
        image.pixels[offset2] = mem;
      }
    }
  }
}

"
            }
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":100.047956228,\"y\":111.137670636}",
            "uiCollapsedState" : "2"
            },
          "name" : "Cache_2",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "value",
              "nodePortType" : "In"
              }
            ],
          "executable" : "Fabric.Core.Data.Cache",
          "presetGUID" : "D903AFD981FE9214C69943F542D5FD60"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":231.048047781,\"y\":146.137540936}",
            "uiCollapsedState" : "2"
            },
          "name" : "Clone_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "value",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "clonedValue",
              "nodePortType" : "Out"
              }
            ],
          "executable" : "Fabric.Core.Data.Clone",
          "presetGUID" : "30401D7851DEFCFA5C46EB3926DD8BAD"
          }
        ],
      "connections" : {
        "width" : [
          "applyImage.resX"
          ],
        "height" : [
          "applyImage.resY"
          ],
        "colors" : [
          "applyImage.colors"
          ],
        "flipH" : [
          "applyImage.flipH"
          ],
        "flipV" : [
          "applyImage.flipV"
          ],
        "applyImage.image" : [
          "Cache_2.value"
          ],
        "Cache_2.value" : [
          "result",
          "Clone_1.value"
          ],
        "Clone_1.clonedValue" : [
          "clonedResult"
          ]
        }
      },
    "Fabric.Core.Data.Clone" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 214,\n  \"g\" : 191,\n  \"b\" : 103\n  }",
        "uiHeaderColor" : "{\n  \"r\" : 188,\n  \"g\" : 129,\n  \"b\" : 83\n  }"
        },
      "title" : "Clone",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "value",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "clonedValue",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "30401D7851DEFCFA5C46EB3926DD8BAD",
      "code" : "dfgEntry {
  clonedValue = value.clone();
}
"
      },
    "Fabric.Core.Constants.UInt32" : {
      "objectType" : "Func",
      "metadata" : {
        "uiAlwaysShowDaisyChainPorts" : "true"
        },
      "title" : "UInt32",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "value",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "UInt32"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "522214488375FF199C3D64A3DBF3C762",
      "code" : "dfgEntry {
}
"
      },
    "Fabric.Compounds.Points.Display.DrawPoints" : {
      "objectType" : "Graph",
      "title" : "DrawPoints",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "name",
          "nodePortType" : "Out",
          "defaultValues" : {
            "String" : "points"
            },
          "execPortType" : "In",
          "typeSpec" : "String"
          },
        {
          "objectType" : "ExecPort",
          "name" : "color",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color" : {
              "r" : 1,
              "g" : 1,
              "b" : 0,
              "a" : 1
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "ExecPort",
          "name" : "size",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Scalar" : 2
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "pos",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "Vec3[]"
          },
        {
          "objectType" : "ExecPort",
          "name" : "debugHandle",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "InlineDebugShape"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "F858B0DBCA2711E1E8537A8B964E9D76",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 615, \"y\": 181}"
            },
          "name" : "GetEmptyDebugShape",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "this",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "name",
              "nodePortType" : "In",
              "defaultValues" : {
                "String" : "debug"
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "result",
              "nodePortType" : "Out"
              }
            ],
          "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.GetEmptyDebugShape",
          "presetGUID" : "DB3916AA2CE58EEAFAEDB9E2653EF4D6"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 1205, \"y\": 255}"
            },
          "name" : "DrawPoints",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "this",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "pos",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "result",
              "nodePortType" : "Out"
              }
            ],
          "executable" : "Fabric.Exts.InlineDrawing.InlineDebugShape.DrawPoints",
          "presetGUID" : "57440AAF5B9C14306500FCAE88C8E7F4"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 811, \"y\": 259}"
            },
          "name" : "SetPen",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "this",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "color",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "radius",
              "nodePortType" : "In"
              }
            ],
          "executable" : "Fabric.Exts.InlineDrawing.InlineDebugShape.SetPen",
          "presetGUID" : "831A0298E12DACF564A86570A7C7AE48"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 991, \"y\": 245}"
            },
          "name" : "SetPointSize",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "this",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "value",
              "nodePortType" : "In",
              "defaultValues" : {
                "Float32" : 2
                }
              }
            ],
          "executable" : "Fabric.Exts.InlineDrawing.InlineDebugShape.SetPointSize",
          "presetGUID" : "6F401B062FE20D393723F76BCC497877"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":342.0,\"y\":85.0}"
            },
          "name" : "EmptyDrawingHandle",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "handle",
              "nodePortType" : "Out"
              }
            ],
          "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle",
          "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70"
          }
        ],
      "connections" : {
        "name" : [
          "GetEmptyDebugShape.name"
          ],
        "color" : [
          "SetPen.color"
          ],
        "size" : [
          "SetPointSize.value"
          ],
        "pos" : [
          "DrawPoints.pos"
          ],
        "GetEmptyDebugShape.result" : [
          "SetPen.this"
          ],
        "DrawPoints.this" : [
          "debugHandle"
          ],
        "SetPen.this" : [
          "SetPointSize.this"
          ],
        "SetPointSize.this" : [
          "DrawPoints.this"
          ],
        "EmptyDrawingHandle.handle" : [
          "GetEmptyDebugShape.this"
          ]
        }
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.GetEmptyDebugShape" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
        "uiTooltip" : "helper function to clear a debug drawing shape\n\n Supported by DrawingHandle"
        },
      "title" : "GetEmptyDebugShape",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "this",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "DrawingHandle"
          },
        {
          "objectType" : "ExecPort",
          "name" : "name",
          "nodePortType" : "Out",
          "defaultValues" : {
            "String" : "debug"
            },
          "execPortType" : "In",
          "typeSpec" : "String"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "InlineDebugShape"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*",
        "FabricInterfaces" : "*"
        },
      "presetGUID" : "DB3916AA2CE58EEAFAEDB9E2653EF4D6",
      "code" : "require InlineDrawing;

dfgEntry {
  result = this.getEmptyDebugShape(name);
}
"
      },
    "Fabric.Exts.InlineDrawing.InlineDebugShape.DrawPoints" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/InlineDrawing/InlineDebugShape.html",
        "uiTooltip" : "draws a bunch of points\n\n Supported by InlineDebugShape"
        },
      "title" : "DrawPoints",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "this",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "InlineDebugShape"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "name" : "pos",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "Vec3[]"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "InlineDebugShape"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*"
        },
      "presetGUID" : "57440AAF5B9C14306500FCAE88C8E7F4",
      "code" : "require InlineDrawing;

dfgEntry {
  result = this.drawPoints(pos);
}
"
      },
    "Fabric.Exts.InlineDrawing.InlineDebugShape.SetPen" : {
      "objectType" : "Func",
      "metadata" : {
        "uiTooltip" : "sets the current pen\n\nSupported types:\n  this: InlineDebugShape\n  color: Color\n  radius: Float32\n"
        },
      "title" : "SetPen",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "this",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "InlineDebugShape"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 0,\n  \"b\" : 0\n  }"
            },
          "name" : "color",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color" : {
              "r" : 0,
              "g" : 1,
              "b" : 0,
              "a" : 1
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "ExecPort",
          "name" : "radius",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Float32" : 1
            },
          "execPortType" : "In",
          "typeSpec" : "Float32"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*"
        },
      "presetGUID" : "831A0298E12DACF564A86570A7C7AE48",
      "code" : "require InlineDrawing;

dfgEntry {
  this.setPen(color, radius);
}
"
      },
    "Fabric.Exts.InlineDrawing.InlineDebugShape.SetPointSize" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/InlineDrawing/InlineDebugShape.html",
        "uiTooltip" : "sets the current point size used\n\n Supported by InlineDebugShape"
        },
      "title" : "SetPointSize",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "this",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "InlineDebugShape"
          },
        {
          "objectType" : "ExecPort",
          "name" : "value",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Scalar" : 1
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*"
        },
      "presetGUID" : "6F401B062FE20D393723F76BCC497877",
      "code" : "require InlineDrawing;

dfgEntry {
  this.setPointSize(value);
}
"
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.EmptyDrawingHandle" : {
      "objectType" : "Graph",
      "title" : "EmptyDrawingHandle",
      "cacheRule" : "never",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "handle",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "DrawingHandle"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "2440020BA6A1CAB1CEB690A198F99C70",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\": 894, \"y\": 100}"
            },
          "name" : "Clear",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "this",
              "nodePortType" : "IO"
              }
            ],
          "cacheRule" : "never",
          "executable" : "Fabric.Exts.InlineDrawing.DrawingHandle.Clear",
          "presetGUID" : "39E8D81FA7C7C4A825877F16EFE3564F"
          },
        {
          "objectType" : "Var",
          "metadata" : {
            "uiGraphPos" : "{\"x\":567.0,\"y\":56.0}",
            "uiCollapsedState" : "0"
            },
          "name" : "handleVar",
          "ports" : [
            {
              "objectType" : "VarPort",
              "name" : "value",
              "nodePortType" : "IO"
              }
            ],
          "dataType" : "DrawingHandle",
          "extDep" : "InlineDrawing:*"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":287.0,\"y\":56.0}"
            },
          "name" : "CreateDrawingHandle",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "handle",
              "nodePortType" : "Out"
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "title" : "Create DrawingHandle",
            "ports" : [
              {
                "objectType" : "ExecPort",
                "name" : "exec",
                "nodePortType" : "IO",
                "execPortType" : "IO",
                "typeSpec" : "Execute"
                },
              {
                "objectType" : "ExecPort",
                "name" : "handle",
                "nodePortType" : "In",
                "execPortType" : "Out",
                "typeSpec" : "DrawingHandle"
                }
              ],
            "extDeps" : {
              "InlineDrawing" : "*"
              },
            "code" : "dfgEntry {
  handle = DrawingHandle();
}
"
            }
          }
        ],
      "connections" : {
        "Clear.this" : [
          "handle"
          ],
        "handleVar.value" : [
          "Clear.this"
          ],
        "CreateDrawingHandle.handle" : [
          "handleVar.value"
          ]
        }
      },
    "Fabric.Exts.InlineDrawing.DrawingHandle.Clear" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/InlineDrawing/DrawingHandle.html",
        "uiTooltip" : "removes all contents from the DrawingHandle\n\n Supported by DrawingHandle"
        },
      "title" : "Clear",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "this",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "DrawingHandle"
          }
        ],
      "extDeps" : {
        "InlineDrawing" : "*"
        },
      "presetGUID" : "39E8D81FA7C7C4A825877F16EFE3564F",
      "code" : "require InlineDrawing;

dfgEntry {
  this.clear();
}
"
      },
    "Fabric.Compounds.Image.Modify.ClearBorders" : {
      "objectType" : "Graph",
      "metadata" : {
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiNodeColor" : "{\n  \"r\" : 144,\n  \"g\" : 130,\n  \"b\" : 120\n  }",
        "uiGraphZoom" : "{\n  \"value\" : 1.0\n  }",
        "uiTooltip" : "clears the borders of an image with a given color",
        "uiGraphPan" : "{\n  \"x\" : 1237.5,\n  \"y\" : 106.5\n  }"
        },
      "title" : "ClearBorders",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "defaultValues" : {
            "Execute" : {}
            },
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "image",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Image2DColor" : null
            },
          "execPortType" : "In",
          "typeSpec" : "Image2DColor"
          },
        {
          "objectType" : "ExecPort",
          "name" : "color",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color" : {
              "r" : 0,
              "g" : 0,
              "b" : 0,
              "a" : 1
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "ExecPort",
          "name" : "left",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : true
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "right",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : true
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "top",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : true
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "bottom",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : true
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "excludeCorners",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : false
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "defaultValues" : {
            "Image2DColor" : null
            },
          "execPortType" : "Out",
          "typeSpec" : "Image2DColor"
          }
        ],
      "extDeps" : {
        "OpenImageIO" : "*",
        "Images" : "*"
        },
      "presetGUID" : "ECA142B106D781072484D6BB7E93F247",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":-480.0,\"y\":-8.0}"
            },
          "name" : "ClearBordersInPlace_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "image",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "color",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "left",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "right",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "top",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "bottom",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "excludeCorners",
              "nodePortType" : "In"
              }
            ],
          "executable" : "Fabric.Compounds.Image.Modify.ClearBordersInPlace",
          "presetGUID" : "DAD8F76723F0975AC27990B39FFEA395"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":-647.0,\"y\":-27.0}",
            "uiCollapsedState" : "2"
            },
          "name" : "Clone_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "value",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "clonedValue",
              "nodePortType" : "Out"
              }
            ],
          "executable" : "Fabric.Core.Data.Clone",
          "presetGUID" : "30401D7851DEFCFA5C46EB3926DD8BAD"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":-275.0,\"y\":-27.0}",
            "uiCollapsedState" : "2"
            },
          "name" : "Cache_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "value",
              "nodePortType" : "In"
              }
            ],
          "executable" : "Fabric.Core.Data.Cache",
          "presetGUID" : "D903AFD981FE9214C69943F542D5FD60"
          }
        ],
      "connections" : {
        "image" : [
          "Clone_1.value"
          ],
        "color" : [
          "ClearBordersInPlace_1.color"
          ],
        "left" : [
          "ClearBordersInPlace_1.left"
          ],
        "right" : [
          "ClearBordersInPlace_1.right"
          ],
        "top" : [
          "ClearBordersInPlace_1.top"
          ],
        "bottom" : [
          "ClearBordersInPlace_1.bottom"
          ],
        "excludeCorners" : [
          "ClearBordersInPlace_1.excludeCorners"
          ],
        "ClearBordersInPlace_1.image" : [
          "Cache_1.value"
          ],
        "Clone_1.clonedValue" : [
          "ClearBordersInPlace_1.image"
          ],
        "Cache_1.value" : [
          "result"
          ]
        }
      },
    "Fabric.Compounds.Image.Modify.ClearBordersInPlace" : {
      "objectType" : "Graph",
      "metadata" : {
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiNodeColor" : "{\n  \"r\" : 144,\n  \"g\" : 130,\n  \"b\" : 120\n  }",
        "uiGraphZoom" : "{\n  \"value\" : 1.0\n  }",
        "uiTooltip" : "clears the borders of an image with a given color",
        "uiGraphPan" : "{\n  \"x\" : 813.0,\n  \"y\" : 144.0\n  }"
        },
      "title" : "ClearBordersInPlace",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "defaultValues" : {
            "Execute" : {}
            },
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "image",
          "nodePortType" : "IO",
          "defaultValues" : {
            "Image2DColor" : null
            },
          "execPortType" : "IO",
          "typeSpec" : "Image2DColor"
          },
        {
          "objectType" : "ExecPort",
          "name" : "color",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color" : {
              "r" : 0,
              "g" : 0,
              "b" : 0,
              "a" : 1
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "ExecPort",
          "name" : "left",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : true
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "right",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : true
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "top",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : true
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "bottom",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : true
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          },
        {
          "objectType" : "ExecPort",
          "name" : "excludeCorners",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Boolean" : false
            },
          "execPortType" : "In",
          "typeSpec" : "Boolean"
          }
        ],
      "extDeps" : {
        "OpenImageIO" : "*",
        "Images" : "*"
        },
      "presetGUID" : "DAD8F76723F0975AC27990B39FFEA395",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":-95.0,\"y\":-22.0}"
            },
          "name" : "applyClearBordersInPlace",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "image",
              "nodePortType" : "IO",
              "defaultValues" : {
                "Integer" : 720
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "color",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "left",
              "nodePortType" : "In",
              "defaultValues" : {
                "Boolean" : true
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "right",
              "nodePortType" : "In",
              "defaultValues" : {
                "Boolean" : true
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "top",
              "nodePortType" : "In",
              "defaultValues" : {
                "Boolean" : true
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "bottom",
              "nodePortType" : "In",
              "defaultValues" : {
                "Boolean" : true
                }
              },
            {
              "objectType" : "InstPort",
              "name" : "excludeCorners",
              "nodePortType" : "In",
              "defaultValues" : {
                "Boolean" : false
                }
              }
            ],
          "definition" : {
            "objectType" : "Func",
            "metadata" : {
              "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
              "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }"
              },
            "title" : "applyLoadImage",
            "ports" : [
              {
                "objectType" : "ExecPort",
                "name" : "exec",
                "nodePortType" : "IO",
                "execPortType" : "IO",
                "typeSpec" : "Execute"
                },
              {
                "objectType" : "ExecPort",
                "name" : "image",
                "nodePortType" : "IO",
                "execPortType" : "IO",
                "typeSpec" : "Image2DColor"
                },
              {
                "objectType" : "ExecPort",
                "name" : "color",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Color"
                },
              {
                "objectType" : "ExecPort",
                "name" : "left",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Boolean"
                },
              {
                "objectType" : "ExecPort",
                "name" : "right",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Boolean"
                },
              {
                "objectType" : "ExecPort",
                "name" : "top",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Boolean"
                },
              {
                "objectType" : "ExecPort",
                "name" : "bottom",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Boolean"
                },
              {
                "objectType" : "ExecPort",
                "name" : "excludeCorners",
                "nodePortType" : "Out",
                "execPortType" : "In",
                "typeSpec" : "Boolean"
                }
              ],
            "extDeps" : {},
            "code" : "require Math;
require OpenImageIO;
require Images;

dfgEntry
{ 
  Integer resX = image.width;
  Integer resY = image.height;

  // left.
  if (left)
  {
    UInt32 iStart = (excludeCorners ? 1 : 0);
    UInt32 iEnd   = resY - (excludeCorners ? 1 : 0);
    UInt32 index  = iStart * resX;
    for (UInt32 i=iStart;i<iEnd;i++,index+=resX)
      image.pixels[index] = color;
  }

  // right.
  if (right)
  {
    UInt32 iStart = (excludeCorners ? 1 : 0);
    UInt32 iEnd   = resY - (excludeCorners ? 1 : 0);
    UInt32 index  = resX - 1 + iStart * resX;
    for (UInt32 i=iStart;i<iEnd;i++,index+=resX)
      image.pixels[index] = color;
  }

  // top.
  if (top)
  {
    UInt32 iStart = (excludeCorners ? 1 : 0);
    UInt32 iEnd   = resX - (excludeCorners ? 1 : 0);
    for (UInt32 i=iStart;i<iEnd;i++)
      image.pixels[i] = color;
  }

  // bottom.
  if (bottom)
  {
    UInt32 iStart = (excludeCorners ? 1 : 0);
    UInt32 iEnd   = resX - (excludeCorners ? 1 : 0);
    UInt32 index  = iStart + (resY - 1) * resX;
    for (UInt32 i=iStart;i<iEnd;i++,index++)
      image.pixels[index] = color;
  }
}

"
            }
          }
        ],
      "connections" : {
        "image" : [
          "applyClearBordersInPlace.image"
          ],
        "color" : [
          "applyClearBordersInPlace.color"
          ],
        "left" : [
          "applyClearBordersInPlace.left"
          ],
        "right" : [
          "applyClearBordersInPlace.right"
          ],
        "top" : [
          "applyClearBordersInPlace.top"
          ],
        "bottom" : [
          "applyClearBordersInPlace.bottom"
          ],
        "excludeCorners" : [
          "applyClearBordersInPlace.excludeCorners"
          ],
        "applyClearBordersInPlace.image" : [
          "image"
          ]
        }
      },
    "Fabric.Exts.Math.Xfo.DecomposeXfoArray" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/Math/Xfo.html"
        },
      "title" : "Xfo[] ->",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 249,\n  \"g\" : 157,\n  \"b\" : 28\n  }"
            },
          "name" : "value",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Xfo[]" : [
              {
                "ori" : {
                  "v" : {
                    "x" : 0,
                    "y" : 0,
                    "z" : 0
                    },
                  "w" : 1
                  },
                "tr" : {
                  "x" : 0,
                  "y" : 0,
                  "z" : 0
                  },
                "sc" : {
                  "x" : 1,
                  "y" : 1,
                  "z" : 1
                  }
                }
              ]
            },
          "execPortType" : "In",
          "typeSpec" : "Xfo[]"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 0,\n  \"g\" : 191,\n  \"b\" : 232\n  }"
            },
          "name" : "ori",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Quat[]"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "name" : "tr",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Vec3[]"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "name" : "sc",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Vec3[]"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "F1CE36998E153872EE926747BEB0E7A6",
      "code" : "require Math;

operator Math_Xfo_decompose_task<<<index>>>(in Xfo[] value, io Quat[] ori, io Vec3[] tr, io Vec3[] sc) {
  ori[index] = value[index].ori;
  tr[index] = value[index].tr;
  sc[index] = value[index].sc;
}

dfgEntry {
  Size task_size = value.size();
  ori.resize(task_size);
  tr.resize(task_size);
  sc.resize(task_size);
  if(task_size < 10000 /* pex margin */) {
    for(Size i = 0; i < task_size; i++) {
      Math_Xfo_decompose_task(i, value, ori, tr, sc);
    }
  } else {
    Math_Xfo_decompose_task<<<task_size>>>(value, ori, tr, sc);
  }
}
"
      },
    "Fabric.Compounds.Blocks.Array.ModifyInPlace" : {
      "objectType" : "Graph",
      "metadata" : {
        "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }",
        "uiNodeColor" : "{\n  \"r\" : 121,\n  \"g\" : 134,\n  \"b\" : 143\n  }",
        "uiGraphZoom" : "{\n  \"value\" : 1.0\n  }",
        "uiGraphPan" : "{\n  \"x\" : 352.0,\n  \"y\" : -10.0\n  }"
        },
      "title" : "ModifyInPlace",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "defaultValues" : {
            "Execute" : {}
            },
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "array",
          "nodePortType" : "IO",
          "execPortType" : "IO"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "9C422701FE600EEEEA66D30DD488C002",
      "nodes" : [
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":354.0,\"y\":171.0}"
            },
          "name" : "Size_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "array",
              "nodePortType" : "In"
              },
            {
              "objectType" : "InstPort",
              "name" : "count",
              "nodePortType" : "Out"
              }
            ],
          "executable" : "Fabric.Core.Array.Size",
          "presetGUID" : "5B186A97C79ACF32526EC844AD805421"
          },
        {
          "objectType" : "Inst",
          "metadata" : {
            "uiGraphPos" : "{\"x\":539.0,\"y\":161.0}"
            },
          "name" : "ForLoop_1",
          "ports" : [
            {
              "objectType" : "InstPort",
              "name" : "exec",
              "nodePortType" : "IO"
              },
            {
              "objectType" : "InstPort",
              "name" : "count",
              "nodePortType" : "In"
              }
            ],
          "blocks" : [
            {
              "name" : "body",
              "objectType" : "InstBlock",
              "ports" : [
                {
                  "objectType" : "InstBlockPort",
                  "name" : "array",
                  "nodePortType" : "In",
                  "outsidePortType" : "In"
                  }
                ],
              "exec" : {
                "objectType" : "Graph",
                "metadata" : {
                  "uiGraphZoom" : "{\n  \"value\" : 1.0\n  }",
                  "uiGraphPan" : "{\n  \"x\" : 88.0,\n  \"y\" : -38.25\n  }"
                  },
                "title" : "",
                "ports" : [
                  {
                    "objectType" : "ExecPort",
                    "name" : "array",
                    "nodePortType" : "Out",
                    "execPortType" : "In"
                    }
                  ],
                "blocks" : [
                  {
                    "objectType" : "ExecBlock",
                    "metadata" : {
                      "uiGraphPos" : "{\"x\":683.0,\"y\":254.0}",
                      "uiNodeColor" : "{\n  \"r\" : 193,\n  \"g\" : 189,\n  \"b\" : 138\n  }",
                      "uiTextColor" : "{\n  \"r\" : 20,\n  \"g\" : 20,\n  \"b\" : 20\n  }"
                      },
                    "name" : "modify",
                    "ports" : [
                      {
                        "objectType" : "ExecBlockPort",
                        "name" : "exec",
                        "nodePortType" : "IO",
                        "outsidePortType" : "IO",
                        "typeSpec" : "Execute"
                        },
                      {
                        "objectType" : "ExecBlockPort",
                        "name" : "index",
                        "nodePortType" : "In",
                        "defaultValues" : {
                          "UInt32" : 0
                          },
                        "outsidePortType" : "In",
                        "typeSpec" : "UInt32"
                        },
                      {
                        "objectType" : "ExecBlockPort",
                        "name" : "originalValue",
                        "nodePortType" : "In",
                        "outsidePortType" : "In"
                        },
                      {
                        "objectType" : "ExecBlockPort",
                        "name" : "newValue",
                        "nodePortType" : "Out",
                        "outsidePortType" : "Out"
                        }
                      ]
                    }
                  ],
                "extDeps" : {},
                "nodes" : [
                  {
                    "objectType" : "Inst",
                    "metadata" : {
                      "uiGraphPos" : "{\"x\":383.5,\"y\":177.5}"
                      },
                    "name" : "Get_1",
                    "ports" : [
                      {
                        "objectType" : "InstPort",
                        "name" : "exec",
                        "nodePortType" : "IO"
                        },
                      {
                        "objectType" : "InstPort",
                        "name" : "array",
                        "nodePortType" : "In"
                        },
                      {
                        "objectType" : "InstPort",
                        "name" : "index",
                        "nodePortType" : "In"
                        },
                      {
                        "objectType" : "InstPort",
                        "name" : "element",
                        "nodePortType" : "Out"
                        }
                      ],
                    "executable" : "Fabric.Core.Array.Get",
                    "presetGUID" : "880D755392299678EEB93260424986E2"
                    },
                  {
                    "objectType" : "Inst",
                    "metadata" : {
                      "uiGraphPos" : "{\"x\":1007.5,\"y\":177.5}"
                      },
                    "name" : "Set_1",
                    "ports" : [
                      {
                        "objectType" : "InstPort",
                        "name" : "exec",
                        "nodePortType" : "IO"
                        },
                      {
                        "objectType" : "InstPort",
                        "name" : "array",
                        "nodePortType" : "IO"
                        },
                      {
                        "objectType" : "InstPort",
                        "name" : "index",
                        "nodePortType" : "In"
                        },
                      {
                        "objectType" : "InstPort",
                        "name" : "element",
                        "nodePortType" : "In"
                        }
                      ],
                    "executable" : "Fabric.Core.Array.Set",
                    "presetGUID" : "D4D13729AE7853F59417AF7DD50571E2"
                    }
                  ],
                "connections" : {
                  "index" : [
                    "Get_1.index"
                    ],
                  "array" : [
                    "Get_1.array"
                    ],
                  "modify.index" : [
                    "Set_1.index"
                    ],
                  "modify.newValue" : [
                    "Set_1.element"
                    ],
                  "Get_1.array" : [
                    "Set_1.array"
                    ],
                  "Get_1.index" : [
                    "modify.index"
                    ],
                  "Get_1.element" : [
                    "modify.originalValue"
                    ],
                  "Set_1.exec" : [
                    "exec"
                    ]
                  }
                }
              }
            ],
          "executable" : "Fabric.Core.Control.ForLoop",
          "presetGUID" : "3F6896C3844799D09EA3F8C78850EC3B"
          }
        ],
      "connections" : {
        "array" : [
          "Size_1.array"
          ],
        "Size_1.array" : [
          "ForLoop_1.body.array"
          ],
        "Size_1.count" : [
          "ForLoop_1.count"
          ],
        "ForLoop_1.body.array" : [
          "array"
          ]
        }
      },
    "Fabric.Core.Array.Size" : {
      "objectType" : "Func",
      "title" : "Size[]",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "array",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "count",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "UInt32"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "5B186A97C79ACF32526EC844AD805421",
      "code" : "
dfgEntry {
	count = array.size();
}
"
      },
    "Fabric.Core.Control.ForLoop" : {
      "objectType" : "Func",
      "title" : "ForLoop",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "defaultValues" : {
            "Execute" : {}
            },
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiPersistValue" : "true"
            },
          "name" : "count",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Count" : 3
            },
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          }
        ],
      "blocks" : [
        {
          "objectType" : "ExecBlock",
          "name" : "body",
          "ports" : [
            {
              "objectType" : "ExecBlockPort",
              "name" : "exec",
              "nodePortType" : "IO",
              "outsidePortType" : "IO",
              "typeSpec" : "Execute"
              },
            {
              "objectType" : "ExecBlockPort",
              "name" : "index",
              "nodePortType" : "In",
              "outsidePortType" : "In",
              "typeSpec" : "Index"
              }
            ]
          }
        ],
      "extDeps" : {},
      "presetGUID" : "3F6896C3844799D09EA3F8C78850EC3B",
      "code" : "
dfgEntry {
  for ($TYPE$ index = 0; index < count; ++index)
    dfgPullBlockPort('body.exec', index);
}
"
      },
    "Fabric.Core.Array.Get" : {
      "objectType" : "Func",
      "title" : "Get[]",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "array",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$[]"
          },
        {
          "objectType" : "ExecPort",
          "name" : "index",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "UInt32"
          },
        {
          "objectType" : "ExecPort",
          "name" : "element",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "880D755392299678EEB93260424986E2",
      "code" : "
dfgEntry {
	element = array[index];
}
"
      },
    "Fabric.Core.Array.Set" : {
      "objectType" : "Func",
      "title" : "Set[]",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "array",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "$TYPE$[]"
          },
        {
          "objectType" : "ExecPort",
          "name" : "index",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "UInt32"
          },
        {
          "objectType" : "ExecPort",
          "name" : "element",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "D4D13729AE7853F59417AF7DD50571E2",
      "code" : "
dfgEntry {
	array[index] = element;
}
"
      },
    "Fabric.Exts.Images.Image2DColor.Sample" : {
      "objectType" : "Func",
      "metadata" : {
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/Images/Image2DColor.html",
        "uiTooltip" : "Samples the image pixels, returning a bi-linearly interpolated pixel value.\n\n Supported by Image2DColor"
        },
      "title" : "Sample",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "this",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "Image2DColor"
          },
        {
          "objectType" : "ExecPort",
          "name" : "u",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "v",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 0,\n  \"b\" : 0\n  }"
            },
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Color"
          }
        ],
      "extDeps" : {
        "Images" : "*"
        },
      "presetGUID" : "5EE183FCD6B5D0FD2460A4273563D3B5",
      "code" : "require Images;

dfgEntry {
  result = this.sample(u, v);
}
"
      },
    "Fabric.Exts.Math.Color.DecomposeColor" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/Math/Color.html"
        },
      "title" : "Color ->",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 0,\n  \"b\" : 0\n  }"
            },
          "name" : "value",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Color" : {
              "r" : 0,
              "g" : 0,
              "b" : 0,
              "a" : 0
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Color"
          },
        {
          "objectType" : "ExecPort",
          "name" : "r",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "g",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "b",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "a",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Scalar"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "F1CE36998E153872EE926747BEB0E7A6",
      "code" : "require Math;

dfgEntry {
  r = value.r;
  g = value.g;
  b = value.b;
  a = value.a;
}
"
      },
    "Fabric.Exts.Math.Vec3.ComposeVec3" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/Math/Vec3.html"
        },
      "title" : "-> Vec3",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "x",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Scalar" : 0
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "y",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Scalar" : 0
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "z",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Scalar" : 0
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Vec3"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "C61287D19D84D9733903DDC14FABD4AF",
      "code" : "require Math;

dfgEntry {
  result.x = x;
  result.y = y;
  result.z = z;
}
"
      },
    "Fabric.Core.Math.Div" : {
      "objectType" : "Func",
      "title" : "Div",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "lhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "rhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "695E8145F8F42293FBC88BD348869892",
      "code" : "
dfgEntry {
	result = lhs / rhs;
}
"
      },
    "Fabric.Exts.Math.Func.MultiplyScalar" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/Math/RGB.html",
        "uiTooltip" : "Returns the product of this RGB color and a scalar\n\n Supported by RGB,RGBA,ARGB,Color,Vec2,Vec3,Vec4,Mat22,Mat33,Mat44,Quat"
        },
      "title" : "MultiplyScalar",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "this",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "other",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Scalar" : 1
            },
          "execPortType" : "In",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "8EC64304FD2D82AEC7EBB545E4A9709B",
      "code" : "require Math;

dfgEntry {
  result = this.multiplyScalar(other);
}
"
      },
    "Fabric.Core.Math.Add" : {
      "objectType" : "Func",
      "title" : "Add",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "lhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "rhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "8146B3E77857E24CAE33F8B5284585E7",
      "code" : "
dfgEntry {
	result = lhs + rhs;
}
"
      },
    "Fabric.Core.Math.Sub" : {
      "objectType" : "Func",
      "title" : "Sub",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "lhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "rhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "F9754B19F43BC017056B8BA291E7B8B4",
      "code" : "
dfgEntry {
	result = lhs - rhs;
}
"
      },
    "Fabric.Exts.Math.Vec3.DecomposeVec3" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/Math/Vec3.html"
        },
      "title" : "Vec3 ->",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "name" : "value",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Vec3" : {
              "x" : 0,
              "y" : 0,
              "z" : 0
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Vec3"
          },
        {
          "objectType" : "ExecPort",
          "name" : "x",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "y",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Scalar"
          },
        {
          "objectType" : "ExecPort",
          "name" : "z",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "Scalar"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "F1CE36998E153872EE926747BEB0E7A6",
      "code" : "require Math;

dfgEntry {
  x = value.x;
  y = value.y;
  z = value.z;
}
"
      },
    "Fabric.Core.Math.Mul" : {
      "objectType" : "Func",
      "title" : "Mul",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "lhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "rhs",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {},
      "presetGUID" : "CC951B43BB879483B46EFF7965692350",
      "code" : "
dfgEntry {
	result = lhs * rhs;
}
"
      },
    "Fabric.Exts.Math.Func.Clamp" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiTooltip" : "Clamps a scalar value by min and max\n\n Supported by Scalar,Float64,Vec2,Vec2_d,Vec2_i,Vec3,Vec3_d,Vec3_i,Vec4,Vec4_d,Vec4_i"
        },
      "title" : "Clamp",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "name" : "this",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "min",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "max",
          "nodePortType" : "Out",
          "execPortType" : "In",
          "typeSpec" : "$TYPE$"
          },
        {
          "objectType" : "ExecPort",
          "name" : "result",
          "nodePortType" : "In",
          "execPortType" : "Out",
          "typeSpec" : "$TYPE$"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "006FF1E5FC134CF3FA33D72FAA89B665",
      "code" : "require Math;

dfgEntry {
  result = this.clamp(min, max);
}
"
      },
    "Fabric.Exts.Math.Constants.Vec3" : {
      "objectType" : "Func",
      "metadata" : {
        "uiNodeColor" : "{\n  \"r\" : 99,\n  \"g\" : 129,\n  \"b\" : 92\n  }",
        "uiAlwaysShowDaisyChainPorts" : "true",
        "uiDocUrl" : "http://docs.fabric-engine.com/FabricEngine/2.3.0/HTML/KLExtensionsGuide/Math/Vec3.html"
        },
      "title" : "Vec3",
      "ports" : [
        {
          "objectType" : "ExecPort",
          "name" : "exec",
          "nodePortType" : "IO",
          "execPortType" : "IO",
          "typeSpec" : "Execute"
          },
        {
          "objectType" : "ExecPort",
          "metadata" : {
            "uiColor" : "{\n  \"r\" : 255,\n  \"g\" : 242,\n  \"b\" : 0\n  }"
            },
          "name" : "value",
          "nodePortType" : "Out",
          "defaultValues" : {
            "Vec3" : {
              "x" : 0,
              "y" : 0,
              "z" : 0
              }
            },
          "execPortType" : "In",
          "typeSpec" : "Vec3"
          }
        ],
      "extDeps" : {
        "Math" : "*"
        },
      "presetGUID" : "A574B316321209337ABEAC56EF1FA6B9",
      "code" : "dfgEntry {
}
"
      }
    },
  "args" : [
    {
      "type" : "Float32",
      "value" : null
      },
    {
      "type" : "UInt32",
      "value" : 128
      },
    {
      "type" : "UInt32",
      "value" : 128
      },
    {
      "type" : "Execute",
      "value" : null
      },
    {
      "type" : "DrawingHandle",
      "value" : null,
      "ext" : "InlineDrawing"
      },
    {
      "type" : "InlineDebugShape",
      "value" : null,
      "ext" : "InlineDrawing"
      }
    ]
  }